<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Mylène Husson" />


<title>Journal 1</title>

<script src="site_libs/header-attrs-2.29/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/clipboard-1.7.1/clipboard.min.js"></script>
<link href="site_libs/primer-tooltips-1.4.0/build.css" rel="stylesheet" />
<link href="site_libs/klippy-0.0.0.9500/css/klippy.min.css" rel="stylesheet" />
<script src="site_libs/klippy-0.0.0.9500/js/klippy.min.js"></script>
<link href="site_libs/font-awesome-6.5.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>




<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>


<link rel="stylesheet" href="tweaks.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    My journal
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="lab1.html">Week 1</a>
    </li>
    <li>
      <a href="lab2.html">Week 2</a>
    </li>
    <li>
      <a href="lab3.html">Week 3</a>
    </li>
    <li>
      <a href="lab4.html">Week 4</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://mcmhusson.github.io/labjournal_mylene/">
    <span class="fab fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Journal 1</h1>
<h4 class="author">Mylène Husson</h4>

</div>


<pre class="r"><code>library(knitr)
library(tidyverse)
library(scholar)
library(openalexR)
library(rvest)
library(jsonlite)
library(httr)
library(rvest)
library(reshape2)
library(xml2)
library(openxlsx)
library(polite)
library(RSelenium)

#load the functions you need from the packages
fpackage.check &lt;- function(packages) {
  lapply(packages, FUN = function(x) {
    if (!require(x, character.only = TRUE)) {
      install.packages(x, dependencies = TRUE)
      library(x, character.only = TRUE)
    }
  })
}

fsave &lt;- function(x, file = NULL, location = &quot;./data/processed/&quot;) {
  ifelse(!dir.exists(&quot;data&quot;), dir.create(&quot;data&quot;), FALSE)
  ifelse(!dir.exists(&quot;data/processed&quot;), dir.create(&quot;data/processed&quot;), FALSE)
  if (is.null(file))
    file = deparse(substitute(x))
  datename &lt;- substr(gsub(&quot;[:-]&quot;, &quot;&quot;, Sys.time()), 1, 8)
  totalname &lt;- paste(location, datename, file, &quot;.rda&quot;, sep = &quot;&quot;)
  save(x, file = totalname)  #need to fix if file is reloaded as input name, not as x. 
}

fload &lt;- function(filename) {
  load(filename)
  get(ls()[ls() != &quot;filename&quot;])
}

fshowdf &lt;- function(x, ...) {
  knitr::kable(x, digits = 2, &quot;html&quot;, ...) %&gt;%
    kableExtra::kable_styling(bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;)) %&gt;%
    kableExtra::scroll_box(width = &quot;100%&quot;, height = &quot;300px&quot;)
}</code></pre>
<script>
  addClassKlippyTo("pre.r, pre.markdown");
  addKlippy('right', 'top', 'auto', '1', 'Copy code', 'Copied!');
</script>
<p>Last compiled on September, 2025 <br></p>
<hr />
<div id="week-3" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Week 3</h1>
<p><br></p>
<hr />
<div id="workshop" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> Workshop</h2>
<p>In class we started with a recap: people are connected through social
networks and therefore the observations can’t be seen as independent.
The theoretical part is now completed.</p>
<p>Now: what are the implications for the data</p>
<p>You can’t ONLY study individuals, but also the relations: so now you,
need data on relations. This means you always have to get information
from atleast 2 people.</p>
<p><br></p>
<hr />
<div id="survey-data" class="section level3" number="1.1.1">
<h3><span class="header-section-number">1.1.1</span> Survey data</h3>
<p>How to get ego’s from a survey: 1. Diary approach question: who have
you talked to/met in the last week/month/etc? 2. Who are people you feel
comfortable discuss difficult issues with? List a maximum of 5. 3. Who
are the people at work you hang around with?</p>
<p>Then, if someone mentioned 50 people, you can’t ask them their
relationship with everyone. So you sample people from each
group/question, and ask them if they trust this person.</p>
<p>Then you ask the ego for contact information of the other people, or
even better: send a link to the ego to send to the alters. To ensure
this goes well: you get a bol.com voucher if the alter fills in the
survey and then alter also got a gift card.</p>
<p>Ethics: Consent from alters. It’s sensitive data. Especially
web-scraping data. Whether you get ethical permission or not: think for
yourself, do you think it is appropriate?</p>
<p><br></p>
<hr />
</div>
<div id="ethical-webscraping" class="section level3" number="1.1.2">
<h3><span class="header-section-number">1.1.2</span> Ethical
webscraping</h3>
<p>Ethical considerations: which sites can you webscrape, and why are
you not allowed to scare certain websites?</p>
<p>The information is public, but by combining the data, we add extra
information, we are doing stuff with the data, which it was not intended
for. The purpose of the data changes.</p>
<p>General Privacy Regulations law: you are allowed to do this, as long
as it serves a higher societal goal and is not used for commercial
purposes.</p>
<p>If you do not abide to the terms of the website, the question is who
has legal authority.</p>
<p>So we are collecting publicly available data, on a website which
allows web scraping. We are then enriching that data with the gender of
the persons (and ethnicity? weird).</p>
<p><br></p>
</div>
<div id="practical-webscraping" class="section level3" number="1.1.3">
<h3><span class="header-section-number">1.1.3</span> Practical
webscraping</h3>
<p>We are gong to use Xpath. Use xml code instead of HTML. Div is just a
section of a page, and the div has a class. Assigning a class to
specific elements, tells a website what it should look like. There are
functions to get all information stored in a list.</p>
<pre class="r"><code>lpol_staff &lt;- read_html(&quot;https://www.universiteitleiden.nl/en/social-behavioural-sciences/political-science/staff#tab-1&quot;)

# you can do this and then find the pattern with which the names start and say: only select those.
lpol_staff &lt;- lpol_staff |&gt;
  html_nodes(&quot;body&quot;) |&gt;
  html_nodes(xpath = &quot;//a&quot;) |&gt; #collects all hyperlinks 
  html_text() #puts it into text

#lpol_staff

# a different way:
lpol_staff_names &lt;- read_html(&quot;https://www.universiteitleiden.nl/en/social-behavioural-sciences/political-science/staff#tab-1&quot;) |&gt;
    html_element(&quot;section.tab.active&quot;) |&gt;
    html_elements(&quot;ul.table-list&quot;) |&gt;
    html_elements(&quot;li&quot;) |&gt;
    html_elements(&quot;a&quot;) |&gt;
    html_elements(&quot;div&quot;) |&gt;
    html_elements(&quot;strong&quot;) |&gt;
    html_text()

lpol_staff_functions &lt;- read_html(&quot;https://www.universiteitleiden.nl/en/social-behavioural-sciences/political-science/staff#tab-1&quot;) |&gt;
    html_element(&quot;section.tab.active&quot;) |&gt;
    html_elements(&quot;ul.table-list&quot;) |&gt;
    html_elements(&quot;li&quot;) |&gt;
    html_elements(&quot;a&quot;) |&gt;
    html_elements(&quot;div&quot;) |&gt;
    html_elements(&quot;span&quot;) |&gt;
    html_text()

lpol_staff2 &lt;- data.frame(name = lpol_staff_names, funct = lpol_staff_functions)
#lpol_staff2</code></pre>
<p><br></p>
<p>For interactive websites: package Selenider. Can tell it to click on
certain parts of pages. With open_url()</p>
<p>You could also use Rselenium Can tell it to click on allow cookies
when a popup shows up. Can also ask it to highlight the element, nice
for constructing the web-scraper.</p>
<p><br></p>
</div>
<div id="openalexai-scraping" class="section level3" number="1.1.4">
<h3><span class="header-section-number">1.1.4</span> OpenAlexAI
scraping</h3>
<p>For our final project we need to collect data via OpenAlex. You need
to quiry your dataset before it is loaded in R, because it is too large
to open in R.</p>
<p>Can retrieve information using api OpenAlex: <a
href="https://api.openalex.org/works/W2741809807"
class="uri">https://api.openalex.org/works/W2741809807</a></p>
<p>Attributes, publications page 1: You want read in JSON: fromJSON</p>
<pre class="r"><code># load the dataset
df &lt;- fload(&quot;./data/processed/20230620df_gender_jt.rda&quot;)

# link your email
options(openalexR.mailto = &quot;mylene.husson@ru.nl&quot;) 

url &lt;- &quot;https://api.openalex.org/authors?search=Jochem Tolsma&quot;

# based on what you have learned so far, you would probably first try:
jt &lt;- read_html(&quot;https://api.openalex.org/authors?search=Jochem+Tolsma&quot;) %&gt;%
    html_text2()

#substr(jt, 1, 100)

jt_json &lt;- fromJSON(&quot;https://api.openalex.org/authors?search=Jochem+Tolsma&quot;, simplifyVector = FALSE)
#glimpse(jt_json, max.level = 1)

jt_json[[&quot;results&quot;]][[1]][[&quot;display_name&quot;]]</code></pre>
<pre><code>## [1] &quot;Jochem Tolsma&quot;</code></pre>
<pre class="r"><code>#jt_json$results[[1]]$display_name

#View(jt_json)

df &lt;- oa_fetch(entity = &quot;author&quot;, search = &quot;Jochem Tolsma&quot;)
#fshowdf(df)

# can access parts of the list jt_json
#jt_json[[&quot;meta&quot;]]
# could also put the number of the list there (is the third list in jt_json)
#jt_json[[&quot;3&quot;]]

# you can also do it with $ and ask for the structure for instance
# str(jt_json$results)


# look at affiliations
#jt_json$results[[1]]$affiliations</code></pre>
<p><br></p>
<p>OpenAlex have tutorials of how to get data: you need to read this.
You can also use Rappers which have functions which construct the
correct URL to send to OpenAlex: in R the best one is “openalexR” Then
you don’t have to understand the logic of AlexAPI, but then you have to
study the R package.</p>
<p>oa_query() is very important: can ask what you need, and then it
constructs for you the correct URL which is sent to OpenAlexAI but also
need to retrieve it and convert it to a nice dataset so use
oa_fech()</p>
<p><br></p>
<hr />
</div>
</div>
<div id="homework" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Homework</h2>
<p>Update your Research Questions 1. Construct your datasets (including
your new variable/relation)</p>
<p>You only need to give prove of concept, and show how you would do
that on a small scale. So collect co-authors, citations, citationscore
data etc. Doing this with one variable is enough.</p>
<ol start="2" style="list-style-type: decimal">
<li><p>Describe your social network data (see week 2)</p></li>
<li><p>Be prepared to discuss the results of your descriptive statistics
next week.</p></li>
<li><p>Start writing your data section and your result section</p></li>
<li><p>Update your lab journal / website</p></li>
</ol>
<p><br></p>
<hr />
<div id="friday-19-september" class="section level3" number="1.2.1">
<h3><span class="header-section-number">1.2.1</span> Friday 19
September</h3>
<p>My refined research questions were not truly from a social network
perspective so I will try again. This time I am not going to spend a lot
of time finding research, seeking scientific and societal relevance, and
writing a short introduction as that appears to have been a waste of
time last time. I am going to stick with looking at the node level
characteristic gender and zoom in on the position people have in their
collaboration network: betweenness centrality. Betweenness centrality
captures the extent to which a professor serves as a bridge connecting
different co-authorship clusters, and this study investigates whether
male or female professors in Dutch political science and sociology
departments are more likely to occupy these strategically central
positions in the network.</p>
<p>I can first look at how the collaboration patterns are clustered and
then look at the positions men and women have.</p>
<p>RQ1: “How are co-authorship collaborations among Dutch professors in
political science and sociology structured? Are there identifiable
clusters or communities of collaboration?”</p>
<p>Focus: overall network structure, clustering, density, community
detection.</p>
<p>RQ2: “How does gender influence the likelihood of a professor
occupying central positions (e.g., high betweenness centrality) in the
co-authorship network?”</p>
<p>Focus: are women systematically less central than men?</p>
<p><img src="images/Mynetworkcentrality.png" /></p>
<hr />
</div>
<div id="wednesday-24-september" class="section level3" number="1.2.2">
<h3><span class="header-section-number">1.2.2</span> Wednesday 24
September</h3>
<p>Last week I already started on some code to figure out how to get
information from OpenAlex. Today I continued with this. Here you can
find what I figured out.</p>
<pre class="r"><code>################################################################################

# Jochem name

# link your email
options(openalexR.mailto = &quot;mylene.husson@ru.nl&quot;) 

url &lt;- &quot;https://api.openalex.org/authors?search=Jochem Tolsma&quot;

# based on what you have learned so far, you would probably first try:
jt &lt;- read_html(&quot;https://api.openalex.org/authors?search=Jochem+Tolsma&quot;) %&gt;%
  html_text2()

#substr(jt, 1, 100)

jt_json &lt;- fromJSON(&quot;https://api.openalex.org/authors?search=Jochem+Tolsma&quot;, simplifyVector = FALSE)
#glimpse(jt_json, max.level = 1)

List_names &lt;- c()
List_names &lt;- c(List_names, jt_json$results[[1]]$display_name)

################################################################################

List_citationindex &lt;- c()
List_citationindex &lt;- c(List_citationindex, jt_json$results[[1]]$cited_by_count)

#List_citationindex

################################################################################
# GET THE COLLABORATOR&#39;S NAMES

#jt_json$results[[1]]$works_api_url
jt_publi &lt;- fromJSON(jt_json$results[[1]]$works_api_url, simplifyVector = FALSE)

# Let&#39;s try to make a loop: get all of the people Jochem works together with

List_publi &lt;- c()

for (j in 1:length(jt_publi$results)){
  for (i in 1:length(jt_publi$results[[j]]$authorships)) {
    List_publi &lt;- c(List_publi, jt_publi$results[[j]]$authorships[[i]]$raw_author_name)
  }
}

List_publi</code></pre>
<pre><code>##  [1] &quot;Tom van der Meer&quot;      &quot;Jochem Tolsma&quot;         &quot;M. Savelkoul&quot;          &quot;P. Scheepers&quot;         
##  [5] &quot;J. Tolsma&quot;             &quot;L. Hagendoorn&quot;         &quot;Jochem Tolsma&quot;         &quot;Tom van der Meer&quot;     
##  [9] &quot;Maurice Gesthuizen&quot;    &quot;Jochem Tolsma&quot;         &quot;Ioana van Deurzen&quot;     &quot;Tobias H. Stark&quot;      
## [13] &quot;René Veenstra&quot;         &quot;Carlijn Bussemakers&quot;   &quot;Gerbert Kraaykamp&quot;     &quot;Jochem Tolsma&quot;        
## [17] &quot;Jochem Tolsma&quot;         &quot;Marcel Lubbers&quot;        &quot;Mérove Gijsberts&quot;      &quot;Jochem Tolsma&quot;        
## [21] &quot;Joris Blaauw&quot;          &quot;Manfred te Grotenhuis&quot; &quot;Michael Savelkoul&quot;     &quot;Joran Laméris&quot;        
## [25] &quot;Jochem Tolsma&quot;         &quot;Anke Munniksma&quot;        &quot;Peer Scheepers&quot;        &quot;Tobias H. Stark&quot;      
## [29] &quot;Jochem Tolsma&quot;         &quot;Jochem Tolsma&quot;         &quot;Nan Dirk De Graaf&quot;     &quot;Lincoln Quillian&quot;     
## [33] &quot;J. Tolsma&quot;             &quot;A. Need&quot;               &quot;U. de Jong&quot;            &quot;Josja J Rokven&quot;       
## [37] &quot;Gijs de Boer&quot;          &quot;Jochem Tolsma&quot;         &quot;Stijn Ruiter&quot;          &quot;J. Tolsma&quot;            
## [41] &quot;T. W. G. van der Meer&quot; &quot;Anne Maaike Mulders&quot;   &quot;Bas Hofstra&quot;           &quot;Jochem Tolsma&quot;        
## [45] &quot;Jochem Tolsma&quot;         &quot;Gerbert Kraaykamp&quot;     &quot;Jochem Tolsma&quot;         &quot;Maarten H.J. Wolbers&quot; 
## [49] &quot;J. Tolsma&quot;             &quot;T.W.G. van der Meer&quot;   &quot;Sara Kinsbergen&quot;       &quot;Jochem Tolsma&quot;        
## [53] &quot;Stijn Ruiter&quot;          &quot;Thomas Feliciani&quot;      &quot;Andreas Flache&quot;        &quot;Jochem Tolsma&quot;        
## [57] &quot;Daniël van Wijk&quot;       &quot;Gideon Bolt&quot;           &quot;Jochem Tolsma&quot;         &quot;Joran Laméris&quot;        
## [61] &quot;John R. Hipp&quot;          &quot;Jochem Tolsma&quot;         &quot;Rob Franken&quot;           &quot;Hidde Bekhuis&quot;        
## [65] &quot;Jochem Tolsma&quot;         &quot;Thijmen Jeroense&quot;      &quot;Bas Hofstra&quot;           &quot;Niels Spierings&quot;      
## [69] &quot;Jochem Tolsma&quot;         &quot;Sara Kinsbergen&quot;       &quot;Jochem Tolsma&quot;         &quot;Roderick Sluiter&quot;     
## [73] &quot;Jochem Tolsma&quot;         &quot;Peer Scheepers&quot;</code></pre>
<pre class="r"><code># But you don&#39;t just want to know the people, you want to know the collaborations
# So we will make a list of authors per paper, and add that list to a list of all people


List_colabs &lt;- list()
for (j in 1:length(jt_publi$results)){
  List_authors &lt;- c()
  for (i in 1:length(jt_publi$results[[j]]$authorships)) {
    List_authors &lt;- c(List_authors, jt_publi$results[[j]]$authorships[[i]]$raw_author_name)
  }
  List_colabs[[j]] &lt;- List_authors  # assign as list element
}

#View(List_colabs)</code></pre>
<p><br></p>
<p>Now let’s try with openalex api and excel data</p>
<pre class="r"><code>soc_pol &lt;- readxl::read_excel(&quot;/Users/mylenehusson/Desktop/SocialNetworks/labjournal_mylene/data/20240419Scholarid_soc_pol.xlsx&quot;)

mail &lt;- &quot;mylene.husson@ru.nl&quot;

author_list &lt;- soc_pol$Naam[1:3]
#View(author_list)

all_author_data &lt;- list()
all_colabs &lt;- list()

for (author in author_list) {
  search &lt;- tryCatch({
    oa_fetch(entity = &quot;authors&quot;, 
             search = author, 
             mailto = mail)
  }, error = function(e) {
    message(&quot;Error with author: &quot;, author)
    return(NULL)
  })
  
  if (is.null(search) || nrow(search) == 0) {
    next
  }
  
  # store the first result in the list
  all_author_data[[author]] &lt;- search[1, ]
}

#View(all_author_data)

# From all_author_data we can now get the works_api_url
# and use the for loops we made before to get data on who they worked together with.

for (author in names(all_author_data)) {
  
  # get the works_api_url
  works_url &lt;- all_author_data[[author]]$works_api_url
  
  # fetch the publications JSON from the API
  publi &lt;- fromJSON(content(GET(works_url), as = &quot;text&quot;), simplifyVector = FALSE)
  
  List_colabs &lt;- list()  # store co-authors per publication for this author
  
  # loop over each publication
  for (j in seq_along(publi$results)) {
    List_authors &lt;- c()
    
    # loop over authorships in this publication
    for (i in seq_along(publi$results[[j]]$authorships)) {
      List_authors &lt;- c(List_authors, 
                        publi$results[[j]]$authorships[[i]]$raw_author_name)
    }
    
    List_colabs[[j]] &lt;- List_authors
  }
  
  # assign this author&#39;s collaborations to the main list
  all_colabs[[author]] &lt;- List_colabs
}</code></pre>
<pre><code>## No encoding supplied: defaulting to UTF-8.
## No encoding supplied: defaulting to UTF-8.
## No encoding supplied: defaulting to UTF-8.</code></pre>
<pre class="r"><code>#View(all_colabs)

# make it into a dataframe 
# Prepare a tidy data frame for all co-authors
df_colabs &lt;- tibble()

for (author in names(all_colabs)) {
  # get the list of publications for this author
  pubs &lt;- all_colabs[[author]]
  
  # flatten into a tidy format: one row per publication-author
  if (length(pubs) &gt; 0) {
    df_tmp &lt;- tibble(
      main_author = author,
      publication = rep(seq_along(pubs), times = sapply(pubs, length)),
      co_author = unlist(pubs)
    )
    df_colabs &lt;- bind_rows(df_colabs, df_tmp)
  }
}

df_colabs</code></pre>
<pre><code>## # A tibble: 104 × 3
##    main_author     publication co_author          
##    &lt;chr&gt;                 &lt;int&gt; &lt;chr&gt;              
##  1 Agnieszka Kanas           1 A. Kanas           
##  2 Agnieszka Kanas           1 F. van Tubergen    
##  3 Agnieszka Kanas           2 Agnieszka Kanas    
##  4 Agnieszka Kanas           2 Barry R. Chiswick  
##  5 Agnieszka Kanas           2 Tanja van der Lippe
##  6 Agnieszka Kanas           2 Frank van Tubergen 
##  7 Agnieszka Kanas           3 Agnieszka Kanas    
##  8 Agnieszka Kanas           3 Frank van Tubergen 
##  9 Agnieszka Kanas           3 Tanja van der Lippe
## 10 Agnieszka Kanas           4 Agnieszka Kanas    
## # ℹ 94 more rows</code></pre>
<p><br></p>
<p>We could also get information on number of works counts</p>
<pre class="r"><code>work_count &lt;- list()

for (author in names(all_author_data)) {
  work_count[[author]] &lt;- all_author_data[[author]]$works_count
}


# Convert named list to data frame
df_work_count &lt;- data.frame(
  author = names(work_count),
  works_count = unlist(work_count),
  row.names = NULL
)

head(df_work_count)</code></pre>
<pre><code>##                      author works_count
## 1           Agnieszka Kanas          37
## 2           Alissa van Zijl           7
## 3 Ana Maria Torres Chedraui           2</code></pre>
<p><br></p>
<p>As for gender, I think I understand the code from Daphne from 2 years
ago But I can’t get it to work, I think this might be because the site
has changed.</p>
<pre class="r"><code># only the first three rows of socpol
# Keep only the first 3 rows
soc_pol_small &lt;- soc_pol[1:3, ]

soc_pol_small &lt;- soc_pol_small |&gt;
  mutate(firstname = word(Naam, 1))  # extract first names

# Initialize gender column
soc_pol_small$gender &lt;- NA

# Set up polite session
#session &lt;- bow(&quot;https://www.meertens.knaw.nl/nvb/naam/is&quot;, 
 #              user_agent = &quot;mylene.husson@ru.nl&quot;)

# Loop over only these 3 rows
#for (i in seq_len(nrow(soc_pol_small))) {
  
  #name_url &lt;- paste0(&quot;https://www.meertens.knaw.nl/nvb/naam/is/&quot;, soc_pol_small$firstname[i])
  
  #name_session &lt;- nod(session, path = name_url)
  #name_page &lt;- scrape(name_session)
  
  #table_list &lt;- name_page %&gt;% html_table()
  #table_list[[1]][table_list[[1]] == &quot;--&quot;] &lt;- &quot;0&quot;
  
  #if (as.numeric(table_list[[1]]$X3[2]) &gt; as.numeric(table_list[[1]]$X3[6])) {
  #  soc_pol_small$gender[i] &lt;- &quot;male&quot;
  #} else {
  #  soc_pol_small$gender[i] &lt;- &quot;female&quot;
  #}
  
  #print(paste(i, soc_pol_small$firstname[i], soc_pol_small$gender[i]))
#}

# View results for the 3 rows
#View(soc_pol_small)</code></pre>
<p><br></p>
<p>Finally, I read the literature and scanned chapter 8. For the graphs,
perhaps use: install.packages(“pak”) pak::pak(‘thomasp85/ggraph’)</p>
</div>
</div>
</div>

<div id="rmd-source-code">LS0tCnRpdGxlOiAiSm91cm5hbCAxIgojYmlibGlvZ3JhcGh5OiByZWZlcmVuY2VzLmJpYgphdXRob3I6ICJNeWzDqG5lIEh1c3NvbiIKLS0tCgpgYGB7ciwgZWNobz1UUlVFLCByZXN1bHRzPSdoaWRlJywgbWVzc2FnZT1GQUxTRSwgd2FybmluZz1GQUxTRX0KbGlicmFyeShrbml0cikKbGlicmFyeSh0aWR5dmVyc2UpCmxpYnJhcnkoc2Nob2xhcikKbGlicmFyeShvcGVuYWxleFIpCmxpYnJhcnkocnZlc3QpCmxpYnJhcnkoanNvbmxpdGUpCmxpYnJhcnkoaHR0cikKbGlicmFyeShydmVzdCkKbGlicmFyeShyZXNoYXBlMikKbGlicmFyeSh4bWwyKQpsaWJyYXJ5KG9wZW54bHN4KQpsaWJyYXJ5KHBvbGl0ZSkKbGlicmFyeShSU2VsZW5pdW0pCgojbG9hZCB0aGUgZnVuY3Rpb25zIHlvdSBuZWVkIGZyb20gdGhlIHBhY2thZ2VzCmZwYWNrYWdlLmNoZWNrIDwtIGZ1bmN0aW9uKHBhY2thZ2VzKSB7CiAgbGFwcGx5KHBhY2thZ2VzLCBGVU4gPSBmdW5jdGlvbih4KSB7CiAgICBpZiAoIXJlcXVpcmUoeCwgY2hhcmFjdGVyLm9ubHkgPSBUUlVFKSkgewogICAgICBpbnN0YWxsLnBhY2thZ2VzKHgsIGRlcGVuZGVuY2llcyA9IFRSVUUpCiAgICAgIGxpYnJhcnkoeCwgY2hhcmFjdGVyLm9ubHkgPSBUUlVFKQogICAgfQogIH0pCn0KCmZzYXZlIDwtIGZ1bmN0aW9uKHgsIGZpbGUgPSBOVUxMLCBsb2NhdGlvbiA9ICIuL2RhdGEvcHJvY2Vzc2VkLyIpIHsKICBpZmVsc2UoIWRpci5leGlzdHMoImRhdGEiKSwgZGlyLmNyZWF0ZSgiZGF0YSIpLCBGQUxTRSkKICBpZmVsc2UoIWRpci5leGlzdHMoImRhdGEvcHJvY2Vzc2VkIiksIGRpci5jcmVhdGUoImRhdGEvcHJvY2Vzc2VkIiksIEZBTFNFKQogIGlmIChpcy5udWxsKGZpbGUpKQogICAgZmlsZSA9IGRlcGFyc2Uoc3Vic3RpdHV0ZSh4KSkKICBkYXRlbmFtZSA8LSBzdWJzdHIoZ3N1YigiWzotXSIsICIiLCBTeXMudGltZSgpKSwgMSwgOCkKICB0b3RhbG5hbWUgPC0gcGFzdGUobG9jYXRpb24sIGRhdGVuYW1lLCBmaWxlLCAiLnJkYSIsIHNlcCA9ICIiKQogIHNhdmUoeCwgZmlsZSA9IHRvdGFsbmFtZSkgICNuZWVkIHRvIGZpeCBpZiBmaWxlIGlzIHJlbG9hZGVkIGFzIGlucHV0IG5hbWUsIG5vdCBhcyB4LiAKfQoKZmxvYWQgPC0gZnVuY3Rpb24oZmlsZW5hbWUpIHsKICBsb2FkKGZpbGVuYW1lKQogIGdldChscygpW2xzKCkgIT0gImZpbGVuYW1lIl0pCn0KCmZzaG93ZGYgPC0gZnVuY3Rpb24oeCwgLi4uKSB7CiAga25pdHI6OmthYmxlKHgsIGRpZ2l0cyA9IDIsICJodG1sIiwgLi4uKSAlPiUKICAgIGthYmxlRXh0cmE6OmthYmxlX3N0eWxpbmcoYm9vdHN0cmFwX29wdGlvbnMgPSBjKCJzdHJpcGVkIiwgImhvdmVyIikpICU+JQogICAga2FibGVFeHRyYTo6c2Nyb2xsX2JveCh3aWR0aCA9ICIxMDAlIiwgaGVpZ2h0ID0gIjMwMHB4IikKfQoKYGBgCgpgYGB7ciBrbGlwcHksIGVjaG89RkFMU0UsIGluY2x1ZGU9VFJVRX0Ka2xpcHB5OjprbGlwcHkocG9zaXRpb24gPSBjKCd0b3AnLCAncmlnaHQnKSkKI2tsaXBweTo6a2xpcHB5KGNvbG9yID0gJ2RhcmtyZWQnKQoja2xpcHB5OjprbGlwcHkodG9vbHRpcF9tZXNzYWdlID0gJ0NsaWNrIHRvIGNvcHknLCB0b29sdGlwX3N1Y2Nlc3MgPSAnRG9uZScpCmBgYAoKTGFzdCBjb21waWxlZCBvbiBgciBmb3JtYXQoU3lzLnRpbWUoKSwgJyVCLCAlWScpYAo8YnI+CgotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiMgV2VlayAzCjxicj4KCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKIyMgV29ya3Nob3AKCkluIGNsYXNzIHdlIHN0YXJ0ZWQgd2l0aCBhIHJlY2FwOiBwZW9wbGUgYXJlIGNvbm5lY3RlZCB0aHJvdWdoIHNvY2lhbCBuZXR3b3JrcyBhbmQgdGhlcmVmb3JlIHRoZSBvYnNlcnZhdGlvbnMgY2FuJ3QgYmUgc2VlbiBhcyBpbmRlcGVuZGVudC4gVGhlIHRoZW9yZXRpY2FsIHBhcnQgaXMgbm93IGNvbXBsZXRlZC4gCgpOb3c6IHdoYXQgYXJlIHRoZSBpbXBsaWNhdGlvbnMgZm9yIHRoZSBkYXRhCgpZb3UgY2FuJ3QgT05MWSBzdHVkeSBpbmRpdmlkdWFscywgYnV0IGFsc28gdGhlIHJlbGF0aW9uczogc28gbm93IHlvdSwgbmVlZCBkYXRhIG9uIHJlbGF0aW9ucy4gVGhpcyBtZWFucyB5b3UgYWx3YXlzIGhhdmUgdG8gZ2V0IGluZm9ybWF0aW9uIGZyb20gYXRsZWFzdCAyIHBlb3BsZS4gCgo8YnI+CgotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiMjIyBTdXJ2ZXkgZGF0YQpIb3cgdG8gZ2V0IGVnbydzIGZyb20gYSBzdXJ2ZXk6CjEuIERpYXJ5IGFwcHJvYWNoIHF1ZXN0aW9uOiB3aG8gaGF2ZSB5b3UgdGFsa2VkIHRvL21ldCBpbiB0aGUgbGFzdCB3ZWVrL21vbnRoL2V0Yz8KMi4gV2hvIGFyZSBwZW9wbGUgeW91IGZlZWwgY29tZm9ydGFibGUgZGlzY3VzcyBkaWZmaWN1bHQgaXNzdWVzIHdpdGg/IExpc3QgYSBtYXhpbXVtIG9mIDUuCjMuIFdobyBhcmUgdGhlIHBlb3BsZSBhdCB3b3JrIHlvdSBoYW5nIGFyb3VuZCB3aXRoPyAKClRoZW4sIGlmIHNvbWVvbmUgbWVudGlvbmVkIDUwIHBlb3BsZSwgeW91IGNhbid0IGFzayB0aGVtIHRoZWlyIHJlbGF0aW9uc2hpcCB3aXRoIGV2ZXJ5b25lLiBTbyB5b3Ugc2FtcGxlIHBlb3BsZSBmcm9tIGVhY2ggZ3JvdXAvcXVlc3Rpb24sIGFuZCBhc2sgdGhlbSBpZiB0aGV5IHRydXN0IHRoaXMgcGVyc29uLgoKVGhlbiB5b3UgYXNrIHRoZSBlZ28gZm9yIGNvbnRhY3QgaW5mb3JtYXRpb24gb2YgdGhlIG90aGVyIHBlb3BsZSwgb3IgZXZlbiBiZXR0ZXI6IHNlbmQgYSBsaW5rIHRvIHRoZSBlZ28gdG8gc2VuZCB0byB0aGUgYWx0ZXJzLiBUbyBlbnN1cmUgdGhpcyBnb2VzIHdlbGw6IHlvdSBnZXQgYSBib2wuY29tIHZvdWNoZXIgaWYgdGhlIGFsdGVyIGZpbGxzIGluIHRoZSBzdXJ2ZXkgYW5kIHRoZW4gYWx0ZXIgYWxzbyBnb3QgYSBnaWZ0IGNhcmQuCgpFdGhpY3M6IENvbnNlbnQgZnJvbSBhbHRlcnMuIEl0J3Mgc2Vuc2l0aXZlIGRhdGEuIEVzcGVjaWFsbHkgd2ViLXNjcmFwaW5nIGRhdGEuCldoZXRoZXIgeW91IGdldCBldGhpY2FsIHBlcm1pc3Npb24gb3Igbm90OiB0aGluayBmb3IgeW91cnNlbGYsIGRvIHlvdSB0aGluayBpdCBpcyBhcHByb3ByaWF0ZT8KCjxicj4KCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKIyMjIEV0aGljYWwgd2Vic2NyYXBpbmcKRXRoaWNhbCBjb25zaWRlcmF0aW9uczogd2hpY2ggc2l0ZXMgY2FuIHlvdSB3ZWJzY3JhcGUsIGFuZCB3aHkgYXJlIHlvdSBub3QgYWxsb3dlZCB0byBzY2FyZSBjZXJ0YWluIHdlYnNpdGVzPwoKVGhlIGluZm9ybWF0aW9uIGlzIHB1YmxpYywgYnV0IGJ5IGNvbWJpbmluZyB0aGUgZGF0YSwgd2UgYWRkIGV4dHJhIGluZm9ybWF0aW9uLCB3ZSBhcmUgZG9pbmcgc3R1ZmYgd2l0aCB0aGUgZGF0YSwgd2hpY2ggaXQgd2FzIG5vdCBpbnRlbmRlZCBmb3IuIFRoZSBwdXJwb3NlIG9mIHRoZSBkYXRhIGNoYW5nZXMuIAoKR2VuZXJhbCBQcml2YWN5IFJlZ3VsYXRpb25zIGxhdzogeW91IGFyZSBhbGxvd2VkIHRvIGRvIHRoaXMsIGFzIGxvbmcgYXMgaXQgc2VydmVzIGEgaGlnaGVyIHNvY2lldGFsIGdvYWwgYW5kIGlzIG5vdCB1c2VkIGZvciBjb21tZXJjaWFsIHB1cnBvc2VzLiAKCklmIHlvdSBkbyBub3QgYWJpZGUgdG8gdGhlIHRlcm1zIG9mIHRoZSB3ZWJzaXRlLCB0aGUgcXVlc3Rpb24gaXMgd2hvIGhhcyBsZWdhbCBhdXRob3JpdHkuCgpTbyB3ZSBhcmUgY29sbGVjdGluZyBwdWJsaWNseSBhdmFpbGFibGUgZGF0YSwgb24gYSB3ZWJzaXRlIHdoaWNoIGFsbG93cyB3ZWIgc2NyYXBpbmcuIFdlIGFyZSB0aGVuIGVucmljaGluZyB0aGF0IGRhdGEgd2l0aCB0aGUgZ2VuZGVyIG9mIHRoZSBwZXJzb25zIChhbmQgZXRobmljaXR5PyB3ZWlyZCkuCgo8YnI+CgojIyMgUHJhY3RpY2FsIHdlYnNjcmFwaW5nCgpXZSBhcmUgZ29uZyB0byB1c2UgWHBhdGguIFVzZSB4bWwgY29kZSBpbnN0ZWFkIG9mIEhUTUwuCkRpdiBpcyBqdXN0IGEgc2VjdGlvbiBvZiBhIHBhZ2UsIGFuZCB0aGUgZGl2IGhhcyBhIGNsYXNzLiBBc3NpZ25pbmcgYSBjbGFzcyB0byBzcGVjaWZpYyBlbGVtZW50cywgdGVsbHMgYSB3ZWJzaXRlIHdoYXQgaXQgc2hvdWxkIGxvb2sgbGlrZS4KVGhlcmUgYXJlIGZ1bmN0aW9ucyB0byBnZXQgYWxsIGluZm9ybWF0aW9uIHN0b3JlZCBpbiBhIGxpc3QuCgpgYGB7cn0KCmxwb2xfc3RhZmYgPC0gcmVhZF9odG1sKCJodHRwczovL3d3dy51bml2ZXJzaXRlaXRsZWlkZW4ubmwvZW4vc29jaWFsLWJlaGF2aW91cmFsLXNjaWVuY2VzL3BvbGl0aWNhbC1zY2llbmNlL3N0YWZmI3RhYi0xIikKCiMgeW91IGNhbiBkbyB0aGlzIGFuZCB0aGVuIGZpbmQgdGhlIHBhdHRlcm4gd2l0aCB3aGljaCB0aGUgbmFtZXMgc3RhcnQgYW5kIHNheTogb25seSBzZWxlY3QgdGhvc2UuCmxwb2xfc3RhZmYgPC0gbHBvbF9zdGFmZiB8PgogIGh0bWxfbm9kZXMoImJvZHkiKSB8PgogIGh0bWxfbm9kZXMoeHBhdGggPSAiLy9hIikgfD4gI2NvbGxlY3RzIGFsbCBoeXBlcmxpbmtzIAogIGh0bWxfdGV4dCgpICNwdXRzIGl0IGludG8gdGV4dAoKI2xwb2xfc3RhZmYKCiMgYSBkaWZmZXJlbnQgd2F5OgpscG9sX3N0YWZmX25hbWVzIDwtIHJlYWRfaHRtbCgiaHR0cHM6Ly93d3cudW5pdmVyc2l0ZWl0bGVpZGVuLm5sL2VuL3NvY2lhbC1iZWhhdmlvdXJhbC1zY2llbmNlcy9wb2xpdGljYWwtc2NpZW5jZS9zdGFmZiN0YWItMSIpIHw+CiAgICBodG1sX2VsZW1lbnQoInNlY3Rpb24udGFiLmFjdGl2ZSIpIHw+CiAgICBodG1sX2VsZW1lbnRzKCJ1bC50YWJsZS1saXN0IikgfD4KICAgIGh0bWxfZWxlbWVudHMoImxpIikgfD4KICAgIGh0bWxfZWxlbWVudHMoImEiKSB8PgogICAgaHRtbF9lbGVtZW50cygiZGl2IikgfD4KICAgIGh0bWxfZWxlbWVudHMoInN0cm9uZyIpIHw+CiAgICBodG1sX3RleHQoKQoKbHBvbF9zdGFmZl9mdW5jdGlvbnMgPC0gcmVhZF9odG1sKCJodHRwczovL3d3dy51bml2ZXJzaXRlaXRsZWlkZW4ubmwvZW4vc29jaWFsLWJlaGF2aW91cmFsLXNjaWVuY2VzL3BvbGl0aWNhbC1zY2llbmNlL3N0YWZmI3RhYi0xIikgfD4KICAgIGh0bWxfZWxlbWVudCgic2VjdGlvbi50YWIuYWN0aXZlIikgfD4KICAgIGh0bWxfZWxlbWVudHMoInVsLnRhYmxlLWxpc3QiKSB8PgogICAgaHRtbF9lbGVtZW50cygibGkiKSB8PgogICAgaHRtbF9lbGVtZW50cygiYSIpIHw+CiAgICBodG1sX2VsZW1lbnRzKCJkaXYiKSB8PgogICAgaHRtbF9lbGVtZW50cygic3BhbiIpIHw+CiAgICBodG1sX3RleHQoKQoKbHBvbF9zdGFmZjIgPC0gZGF0YS5mcmFtZShuYW1lID0gbHBvbF9zdGFmZl9uYW1lcywgZnVuY3QgPSBscG9sX3N0YWZmX2Z1bmN0aW9ucykKI2xwb2xfc3RhZmYyCgpgYGAKPGJyPgoKRm9yIGludGVyYWN0aXZlIHdlYnNpdGVzOiBwYWNrYWdlIFNlbGVuaWRlci4gQ2FuIHRlbGwgaXQgdG8gY2xpY2sgb24gY2VydGFpbiBwYXJ0cyBvZiBwYWdlcy4gV2l0aCBvcGVuX3VybCgpCgpZb3UgY291bGQgYWxzbyB1c2UgUnNlbGVuaXVtCkNhbiB0ZWxsIGl0IHRvIGNsaWNrIG9uIGFsbG93IGNvb2tpZXMgd2hlbiBhIHBvcHVwIHNob3dzIHVwLiBDYW4gYWxzbyBhc2sgaXQgdG8gaGlnaGxpZ2h0IHRoZSBlbGVtZW50LCBuaWNlIGZvciBjb25zdHJ1Y3RpbmcgdGhlIHdlYi1zY3JhcGVyLiAKCjxicj4KCiMjIyBPcGVuQWxleEFJIHNjcmFwaW5nCgpGb3Igb3VyIGZpbmFsIHByb2plY3Qgd2UgbmVlZCB0byBjb2xsZWN0IGRhdGEgdmlhIE9wZW5BbGV4LgpZb3UgbmVlZCB0byBxdWlyeSB5b3VyIGRhdGFzZXQgYmVmb3JlIGl0IGlzIGxvYWRlZCBpbiBSLCBiZWNhdXNlIGl0IGlzIHRvbyBsYXJnZSB0byBvcGVuIGluIFIuCgpDYW4gcmV0cmlldmUgaW5mb3JtYXRpb24gdXNpbmcgYXBpIE9wZW5BbGV4OiBodHRwczovL2FwaS5vcGVuYWxleC5vcmcvd29ya3MvVzI3NDE4MDk4MDcKCkF0dHJpYnV0ZXMsIHB1YmxpY2F0aW9ucyBwYWdlIDE6CllvdSB3YW50IHJlYWQgaW4gSlNPTjogZnJvbUpTT04KCmBgYHtyfQoKIyBsb2FkIHRoZSBkYXRhc2V0CmRmIDwtIGZsb2FkKCIuL2RhdGEvcHJvY2Vzc2VkLzIwMjMwNjIwZGZfZ2VuZGVyX2p0LnJkYSIpCgojIGxpbmsgeW91ciBlbWFpbApvcHRpb25zKG9wZW5hbGV4Ui5tYWlsdG8gPSAibXlsZW5lLmh1c3NvbkBydS5ubCIpIAoKdXJsIDwtICJodHRwczovL2FwaS5vcGVuYWxleC5vcmcvYXV0aG9ycz9zZWFyY2g9Sm9jaGVtIFRvbHNtYSIKCiMgYmFzZWQgb24gd2hhdCB5b3UgaGF2ZSBsZWFybmVkIHNvIGZhciwgeW91IHdvdWxkIHByb2JhYmx5IGZpcnN0IHRyeToKanQgPC0gcmVhZF9odG1sKCJodHRwczovL2FwaS5vcGVuYWxleC5vcmcvYXV0aG9ycz9zZWFyY2g9Sm9jaGVtK1RvbHNtYSIpICU+JQogICAgaHRtbF90ZXh0MigpCgojc3Vic3RyKGp0LCAxLCAxMDApCgpqdF9qc29uIDwtIGZyb21KU09OKCJodHRwczovL2FwaS5vcGVuYWxleC5vcmcvYXV0aG9ycz9zZWFyY2g9Sm9jaGVtK1RvbHNtYSIsIHNpbXBsaWZ5VmVjdG9yID0gRkFMU0UpCiNnbGltcHNlKGp0X2pzb24sIG1heC5sZXZlbCA9IDEpCgpqdF9qc29uW1sicmVzdWx0cyJdXVtbMV1dW1siZGlzcGxheV9uYW1lIl1dCiNqdF9qc29uJHJlc3VsdHNbWzFdXSRkaXNwbGF5X25hbWUKCiNWaWV3KGp0X2pzb24pCgpkZiA8LSBvYV9mZXRjaChlbnRpdHkgPSAiYXV0aG9yIiwgc2VhcmNoID0gIkpvY2hlbSBUb2xzbWEiKQojZnNob3dkZihkZikKCiMgY2FuIGFjY2VzcyBwYXJ0cyBvZiB0aGUgbGlzdCBqdF9qc29uCiNqdF9qc29uW1sibWV0YSJdXQojIGNvdWxkIGFsc28gcHV0IHRoZSBudW1iZXIgb2YgdGhlIGxpc3QgdGhlcmUgKGlzIHRoZSB0aGlyZCBsaXN0IGluIGp0X2pzb24pCiNqdF9qc29uW1siMyJdXQoKIyB5b3UgY2FuIGFsc28gZG8gaXQgd2l0aCAkIGFuZCBhc2sgZm9yIHRoZSBzdHJ1Y3R1cmUgZm9yIGluc3RhbmNlCiMgc3RyKGp0X2pzb24kcmVzdWx0cykKCgojIGxvb2sgYXQgYWZmaWxpYXRpb25zCiNqdF9qc29uJHJlc3VsdHNbWzFdXSRhZmZpbGlhdGlvbnMKCmBgYAo8YnI+CgpPcGVuQWxleCBoYXZlIHR1dG9yaWFscyBvZiBob3cgdG8gZ2V0IGRhdGE6IHlvdSBuZWVkIHRvIHJlYWQgdGhpcy4KWW91IGNhbiBhbHNvIHVzZSBSYXBwZXJzIHdoaWNoIGhhdmUgZnVuY3Rpb25zIHdoaWNoIGNvbnN0cnVjdCB0aGUgY29ycmVjdCBVUkwgdG8gc2VuZCB0byBPcGVuQWxleDogaW4gUiB0aGUgYmVzdCBvbmUgaXMgIm9wZW5hbGV4UiIKVGhlbiB5b3UgZG9uJ3QgaGF2ZSB0byB1bmRlcnN0YW5kIHRoZSBsb2dpYyBvZiBBbGV4QVBJLCBidXQgdGhlbiB5b3UgaGF2ZSB0byBzdHVkeSB0aGUgUiBwYWNrYWdlLiAKCm9hX3F1ZXJ5KCkgaXMgdmVyeSBpbXBvcnRhbnQ6IGNhbiBhc2sgd2hhdCB5b3UgbmVlZCwgYW5kIHRoZW4gaXQgY29uc3RydWN0cyBmb3IgeW91IHRoZSBjb3JyZWN0IFVSTCB3aGljaCBpcyBzZW50IHRvIE9wZW5BbGV4QUkKYnV0IGFsc28gbmVlZCB0byByZXRyaWV2ZSBpdCBhbmQgY29udmVydCBpdCB0byBhIG5pY2UgZGF0YXNldApzbyB1c2Ugb2FfZmVjaCgpCgo8YnI+CgotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiMjIEhvbWV3b3JrCgpVcGRhdGUgeW91ciBSZXNlYXJjaCBRdWVzdGlvbnMKMS4gQ29uc3RydWN0IHlvdXIgZGF0YXNldHMgKGluY2x1ZGluZyB5b3VyIG5ldyB2YXJpYWJsZS9yZWxhdGlvbikKCllvdSBvbmx5IG5lZWQgdG8gZ2l2ZSBwcm92ZSBvZiBjb25jZXB0LCBhbmQgc2hvdyBob3cgeW91IHdvdWxkIGRvIHRoYXQgb24gYSBzbWFsbCBzY2FsZS4gU28gY29sbGVjdCBjby1hdXRob3JzLCBjaXRhdGlvbnMsIGNpdGF0aW9uc2NvcmUgZGF0YSBldGMuIERvaW5nIHRoaXMgd2l0aCBvbmUgdmFyaWFibGUgaXMgZW5vdWdoLgoKMi4gRGVzY3JpYmUgeW91ciBzb2NpYWwgbmV0d29yayBkYXRhIChzZWUgd2VlayAyKQoKMy4gQmUgcHJlcGFyZWQgdG8gZGlzY3VzcyB0aGUgcmVzdWx0cyBvZiB5b3VyIGRlc2NyaXB0aXZlIHN0YXRpc3RpY3MgbmV4dCB3ZWVrLgoKNC4gU3RhcnQgd3JpdGluZyB5b3VyIGRhdGEgc2VjdGlvbiBhbmQgeW91ciByZXN1bHQgc2VjdGlvbgoKNS4gVXBkYXRlIHlvdXIgbGFiIGpvdXJuYWwgLyB3ZWJzaXRlCgo8YnI+CgotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiMjIyBGcmlkYXkgMTkgU2VwdGVtYmVyCgpNeSByZWZpbmVkIHJlc2VhcmNoIHF1ZXN0aW9ucyB3ZXJlIG5vdCB0cnVseSBmcm9tIGEgc29jaWFsIG5ldHdvcmsgcGVyc3BlY3RpdmUgc28gSSB3aWxsIHRyeSBhZ2Fpbi4gVGhpcyB0aW1lIEkgYW0gbm90IGdvaW5nIHRvIHNwZW5kIGEgbG90IG9mIHRpbWUgZmluZGluZyByZXNlYXJjaCwgc2Vla2luZyBzY2llbnRpZmljIGFuZCBzb2NpZXRhbCByZWxldmFuY2UsIGFuZCB3cml0aW5nIGEgc2hvcnQgaW50cm9kdWN0aW9uIGFzIHRoYXQgYXBwZWFycyB0byBoYXZlIGJlZW4gYSB3YXN0ZSBvZiB0aW1lIGxhc3QgdGltZS4gSSBhbSBnb2luZyB0byBzdGljayB3aXRoIGxvb2tpbmcgYXQgdGhlIG5vZGUgbGV2ZWwgY2hhcmFjdGVyaXN0aWMgZ2VuZGVyIGFuZCB6b29tIGluIG9uIHRoZSBwb3NpdGlvbiBwZW9wbGUgaGF2ZSBpbiB0aGVpciBjb2xsYWJvcmF0aW9uIG5ldHdvcms6IGJldHdlZW5uZXNzIGNlbnRyYWxpdHkuIEJldHdlZW5uZXNzIGNlbnRyYWxpdHkgY2FwdHVyZXMgdGhlIGV4dGVudCB0byB3aGljaCBhIHByb2Zlc3NvciBzZXJ2ZXMgYXMgYSBicmlkZ2UgY29ubmVjdGluZyBkaWZmZXJlbnQgY28tYXV0aG9yc2hpcCBjbHVzdGVycywgYW5kIHRoaXMgc3R1ZHkgaW52ZXN0aWdhdGVzIHdoZXRoZXIgbWFsZSBvciBmZW1hbGUgcHJvZmVzc29ycyBpbiBEdXRjaCBwb2xpdGljYWwgc2NpZW5jZSBhbmQgc29jaW9sb2d5IGRlcGFydG1lbnRzIGFyZSBtb3JlIGxpa2VseSB0byBvY2N1cHkgdGhlc2Ugc3RyYXRlZ2ljYWxseSBjZW50cmFsIHBvc2l0aW9ucyBpbiB0aGUgbmV0d29yay4KCkkgY2FuIGZpcnN0IGxvb2sgYXQgaG93IHRoZSBjb2xsYWJvcmF0aW9uIHBhdHRlcm5zIGFyZSBjbHVzdGVyZWQgYW5kIHRoZW4gbG9vayBhdCB0aGUgcG9zaXRpb25zIG1lbiBhbmQgd29tZW4gaGF2ZS4gCgpSUTE6IOKAnEhvdyBhcmUgY28tYXV0aG9yc2hpcCBjb2xsYWJvcmF0aW9ucyBhbW9uZyBEdXRjaCBwcm9mZXNzb3JzIGluIHBvbGl0aWNhbCBzY2llbmNlIGFuZCBzb2Npb2xvZ3kgc3RydWN0dXJlZD8gQXJlIHRoZXJlIGlkZW50aWZpYWJsZSBjbHVzdGVycyBvciBjb21tdW5pdGllcyBvZiBjb2xsYWJvcmF0aW9uP+KAnQoKRm9jdXM6IG92ZXJhbGwgbmV0d29yayBzdHJ1Y3R1cmUsIGNsdXN0ZXJpbmcsIGRlbnNpdHksIGNvbW11bml0eSBkZXRlY3Rpb24uCgpSUTI6IOKAnEhvdyBkb2VzIGdlbmRlciBpbmZsdWVuY2UgdGhlIGxpa2VsaWhvb2Qgb2YgYSBwcm9mZXNzb3Igb2NjdXB5aW5nIGNlbnRyYWwgcG9zaXRpb25zIChlLmcuLCBoaWdoIGJldHdlZW5uZXNzIGNlbnRyYWxpdHkpIGluIHRoZSBjby1hdXRob3JzaGlwIG5ldHdvcms/4oCdCgpGb2N1czogYXJlIHdvbWVuIHN5c3RlbWF0aWNhbGx5IGxlc3MgY2VudHJhbCB0aGFuIG1lbj8KCiFbXShpbWFnZXMvTXluZXR3b3JrY2VudHJhbGl0eS5wbmcpCgotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiMjIyBXZWRuZXNkYXkgMjQgU2VwdGVtYmVyCgpMYXN0IHdlZWsgSSBhbHJlYWR5IHN0YXJ0ZWQgb24gc29tZSBjb2RlIHRvIGZpZ3VyZSBvdXQgaG93IHRvIGdldCBpbmZvcm1hdGlvbiBmcm9tIE9wZW5BbGV4LiBUb2RheSBJIGNvbnRpbnVlZCB3aXRoIHRoaXMuIEhlcmUgeW91IGNhbiBmaW5kIHdoYXQgSSBmaWd1cmVkIG91dC4gCgpgYGB7cn0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCiMgSm9jaGVtIG5hbWUKCiMgbGluayB5b3VyIGVtYWlsCm9wdGlvbnMob3BlbmFsZXhSLm1haWx0byA9ICJteWxlbmUuaHVzc29uQHJ1Lm5sIikgCgp1cmwgPC0gImh0dHBzOi8vYXBpLm9wZW5hbGV4Lm9yZy9hdXRob3JzP3NlYXJjaD1Kb2NoZW0gVG9sc21hIgoKIyBiYXNlZCBvbiB3aGF0IHlvdSBoYXZlIGxlYXJuZWQgc28gZmFyLCB5b3Ugd291bGQgcHJvYmFibHkgZmlyc3QgdHJ5OgpqdCA8LSByZWFkX2h0bWwoImh0dHBzOi8vYXBpLm9wZW5hbGV4Lm9yZy9hdXRob3JzP3NlYXJjaD1Kb2NoZW0rVG9sc21hIikgJT4lCiAgaHRtbF90ZXh0MigpCgojc3Vic3RyKGp0LCAxLCAxMDApCgpqdF9qc29uIDwtIGZyb21KU09OKCJodHRwczovL2FwaS5vcGVuYWxleC5vcmcvYXV0aG9ycz9zZWFyY2g9Sm9jaGVtK1RvbHNtYSIsIHNpbXBsaWZ5VmVjdG9yID0gRkFMU0UpCiNnbGltcHNlKGp0X2pzb24sIG1heC5sZXZlbCA9IDEpCgpMaXN0X25hbWVzIDwtIGMoKQpMaXN0X25hbWVzIDwtIGMoTGlzdF9uYW1lcywganRfanNvbiRyZXN1bHRzW1sxXV0kZGlzcGxheV9uYW1lKQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCkxpc3RfY2l0YXRpb25pbmRleCA8LSBjKCkKTGlzdF9jaXRhdGlvbmluZGV4IDwtIGMoTGlzdF9jaXRhdGlvbmluZGV4LCBqdF9qc29uJHJlc3VsdHNbWzFdXSRjaXRlZF9ieV9jb3VudCkKCiNMaXN0X2NpdGF0aW9uaW5kZXgKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMgR0VUIFRIRSBDT0xMQUJPUkFUT1InUyBOQU1FUwoKI2p0X2pzb24kcmVzdWx0c1tbMV1dJHdvcmtzX2FwaV91cmwKanRfcHVibGkgPC0gZnJvbUpTT04oanRfanNvbiRyZXN1bHRzW1sxXV0kd29ya3NfYXBpX3VybCwgc2ltcGxpZnlWZWN0b3IgPSBGQUxTRSkKCiMgTGV0J3MgdHJ5IHRvIG1ha2UgYSBsb29wOiBnZXQgYWxsIG9mIHRoZSBwZW9wbGUgSm9jaGVtIHdvcmtzIHRvZ2V0aGVyIHdpdGgKCkxpc3RfcHVibGkgPC0gYygpCgpmb3IgKGogaW4gMTpsZW5ndGgoanRfcHVibGkkcmVzdWx0cykpewogIGZvciAoaSBpbiAxOmxlbmd0aChqdF9wdWJsaSRyZXN1bHRzW1tqXV0kYXV0aG9yc2hpcHMpKSB7CiAgICBMaXN0X3B1YmxpIDwtIGMoTGlzdF9wdWJsaSwganRfcHVibGkkcmVzdWx0c1tbal1dJGF1dGhvcnNoaXBzW1tpXV0kcmF3X2F1dGhvcl9uYW1lKQogIH0KfQoKTGlzdF9wdWJsaQoKIyBCdXQgeW91IGRvbid0IGp1c3Qgd2FudCB0byBrbm93IHRoZSBwZW9wbGUsIHlvdSB3YW50IHRvIGtub3cgdGhlIGNvbGxhYm9yYXRpb25zCiMgU28gd2Ugd2lsbCBtYWtlIGEgbGlzdCBvZiBhdXRob3JzIHBlciBwYXBlciwgYW5kIGFkZCB0aGF0IGxpc3QgdG8gYSBsaXN0IG9mIGFsbCBwZW9wbGUKCgpMaXN0X2NvbGFicyA8LSBsaXN0KCkKZm9yIChqIGluIDE6bGVuZ3RoKGp0X3B1YmxpJHJlc3VsdHMpKXsKICBMaXN0X2F1dGhvcnMgPC0gYygpCiAgZm9yIChpIGluIDE6bGVuZ3RoKGp0X3B1YmxpJHJlc3VsdHNbW2pdXSRhdXRob3JzaGlwcykpIHsKICAgIExpc3RfYXV0aG9ycyA8LSBjKExpc3RfYXV0aG9ycywganRfcHVibGkkcmVzdWx0c1tbal1dJGF1dGhvcnNoaXBzW1tpXV0kcmF3X2F1dGhvcl9uYW1lKQogIH0KICBMaXN0X2NvbGFic1tbal1dIDwtIExpc3RfYXV0aG9ycyAgIyBhc3NpZ24gYXMgbGlzdCBlbGVtZW50Cn0KCiNWaWV3KExpc3RfY29sYWJzKQoKYGBgCjxicj4KCk5vdyBsZXQncyB0cnkgd2l0aCBvcGVuYWxleCBhcGkgYW5kIGV4Y2VsIGRhdGEKYGBge3J9CgoKc29jX3BvbCA8LSByZWFkeGw6OnJlYWRfZXhjZWwoIi9Vc2Vycy9teWxlbmVodXNzb24vRGVza3RvcC9Tb2NpYWxOZXR3b3Jrcy9sYWJqb3VybmFsX215bGVuZS9kYXRhLzIwMjQwNDE5U2Nob2xhcmlkX3NvY19wb2wueGxzeCIpCgptYWlsIDwtICJteWxlbmUuaHVzc29uQHJ1Lm5sIgoKYXV0aG9yX2xpc3QgPC0gc29jX3BvbCROYWFtWzE6M10KI1ZpZXcoYXV0aG9yX2xpc3QpCgphbGxfYXV0aG9yX2RhdGEgPC0gbGlzdCgpCmFsbF9jb2xhYnMgPC0gbGlzdCgpCgpmb3IgKGF1dGhvciBpbiBhdXRob3JfbGlzdCkgewogIHNlYXJjaCA8LSB0cnlDYXRjaCh7CiAgICBvYV9mZXRjaChlbnRpdHkgPSAiYXV0aG9ycyIsIAogICAgICAgICAgICAgc2VhcmNoID0gYXV0aG9yLCAKICAgICAgICAgICAgIG1haWx0byA9IG1haWwpCiAgfSwgZXJyb3IgPSBmdW5jdGlvbihlKSB7CiAgICBtZXNzYWdlKCJFcnJvciB3aXRoIGF1dGhvcjogIiwgYXV0aG9yKQogICAgcmV0dXJuKE5VTEwpCiAgfSkKICAKICBpZiAoaXMubnVsbChzZWFyY2gpIHx8IG5yb3coc2VhcmNoKSA9PSAwKSB7CiAgICBuZXh0CiAgfQogIAogICMgc3RvcmUgdGhlIGZpcnN0IHJlc3VsdCBpbiB0aGUgbGlzdAogIGFsbF9hdXRob3JfZGF0YVtbYXV0aG9yXV0gPC0gc2VhcmNoWzEsIF0KfQoKI1ZpZXcoYWxsX2F1dGhvcl9kYXRhKQoKIyBGcm9tIGFsbF9hdXRob3JfZGF0YSB3ZSBjYW4gbm93IGdldCB0aGUgd29ya3NfYXBpX3VybAojIGFuZCB1c2UgdGhlIGZvciBsb29wcyB3ZSBtYWRlIGJlZm9yZSB0byBnZXQgZGF0YSBvbiB3aG8gdGhleSB3b3JrZWQgdG9nZXRoZXIgd2l0aC4KCmZvciAoYXV0aG9yIGluIG5hbWVzKGFsbF9hdXRob3JfZGF0YSkpIHsKICAKICAjIGdldCB0aGUgd29ya3NfYXBpX3VybAogIHdvcmtzX3VybCA8LSBhbGxfYXV0aG9yX2RhdGFbW2F1dGhvcl1dJHdvcmtzX2FwaV91cmwKICAKICAjIGZldGNoIHRoZSBwdWJsaWNhdGlvbnMgSlNPTiBmcm9tIHRoZSBBUEkKICBwdWJsaSA8LSBmcm9tSlNPTihjb250ZW50KEdFVCh3b3Jrc191cmwpLCBhcyA9ICJ0ZXh0IiksIHNpbXBsaWZ5VmVjdG9yID0gRkFMU0UpCiAgCiAgTGlzdF9jb2xhYnMgPC0gbGlzdCgpICAjIHN0b3JlIGNvLWF1dGhvcnMgcGVyIHB1YmxpY2F0aW9uIGZvciB0aGlzIGF1dGhvcgogIAogICMgbG9vcCBvdmVyIGVhY2ggcHVibGljYXRpb24KICBmb3IgKGogaW4gc2VxX2Fsb25nKHB1YmxpJHJlc3VsdHMpKSB7CiAgICBMaXN0X2F1dGhvcnMgPC0gYygpCiAgICAKICAgICMgbG9vcCBvdmVyIGF1dGhvcnNoaXBzIGluIHRoaXMgcHVibGljYXRpb24KICAgIGZvciAoaSBpbiBzZXFfYWxvbmcocHVibGkkcmVzdWx0c1tbal1dJGF1dGhvcnNoaXBzKSkgewogICAgICBMaXN0X2F1dGhvcnMgPC0gYyhMaXN0X2F1dGhvcnMsIAogICAgICAgICAgICAgICAgICAgICAgICBwdWJsaSRyZXN1bHRzW1tqXV0kYXV0aG9yc2hpcHNbW2ldXSRyYXdfYXV0aG9yX25hbWUpCiAgICB9CiAgICAKICAgIExpc3RfY29sYWJzW1tqXV0gPC0gTGlzdF9hdXRob3JzCiAgfQogIAogICMgYXNzaWduIHRoaXMgYXV0aG9yJ3MgY29sbGFib3JhdGlvbnMgdG8gdGhlIG1haW4gbGlzdAogIGFsbF9jb2xhYnNbW2F1dGhvcl1dIDwtIExpc3RfY29sYWJzCn0KCiNWaWV3KGFsbF9jb2xhYnMpCgojIG1ha2UgaXQgaW50byBhIGRhdGFmcmFtZSAKIyBQcmVwYXJlIGEgdGlkeSBkYXRhIGZyYW1lIGZvciBhbGwgY28tYXV0aG9ycwpkZl9jb2xhYnMgPC0gdGliYmxlKCkKCmZvciAoYXV0aG9yIGluIG5hbWVzKGFsbF9jb2xhYnMpKSB7CiAgIyBnZXQgdGhlIGxpc3Qgb2YgcHVibGljYXRpb25zIGZvciB0aGlzIGF1dGhvcgogIHB1YnMgPC0gYWxsX2NvbGFic1tbYXV0aG9yXV0KICAKICAjIGZsYXR0ZW4gaW50byBhIHRpZHkgZm9ybWF0OiBvbmUgcm93IHBlciBwdWJsaWNhdGlvbi1hdXRob3IKICBpZiAobGVuZ3RoKHB1YnMpID4gMCkgewogICAgZGZfdG1wIDwtIHRpYmJsZSgKICAgICAgbWFpbl9hdXRob3IgPSBhdXRob3IsCiAgICAgIHB1YmxpY2F0aW9uID0gcmVwKHNlcV9hbG9uZyhwdWJzKSwgdGltZXMgPSBzYXBwbHkocHVicywgbGVuZ3RoKSksCiAgICAgIGNvX2F1dGhvciA9IHVubGlzdChwdWJzKQogICAgKQogICAgZGZfY29sYWJzIDwtIGJpbmRfcm93cyhkZl9jb2xhYnMsIGRmX3RtcCkKICB9Cn0KCmRmX2NvbGFicwpgYGAKPGJyPgoKV2UgY291bGQgYWxzbyBnZXQgaW5mb3JtYXRpb24gb24gbnVtYmVyIG9mIHdvcmtzIGNvdW50cwoKYGBge3J9CndvcmtfY291bnQgPC0gbGlzdCgpCgpmb3IgKGF1dGhvciBpbiBuYW1lcyhhbGxfYXV0aG9yX2RhdGEpKSB7CiAgd29ya19jb3VudFtbYXV0aG9yXV0gPC0gYWxsX2F1dGhvcl9kYXRhW1thdXRob3JdXSR3b3Jrc19jb3VudAp9CgoKIyBDb252ZXJ0IG5hbWVkIGxpc3QgdG8gZGF0YSBmcmFtZQpkZl93b3JrX2NvdW50IDwtIGRhdGEuZnJhbWUoCiAgYXV0aG9yID0gbmFtZXMod29ya19jb3VudCksCiAgd29ya3NfY291bnQgPSB1bmxpc3Qod29ya19jb3VudCksCiAgcm93Lm5hbWVzID0gTlVMTAopCgpoZWFkKGRmX3dvcmtfY291bnQpCmBgYAoKPGJyPgoKQXMgZm9yIGdlbmRlciwgSSB0aGluayBJIHVuZGVyc3RhbmQgdGhlIGNvZGUgZnJvbSBEYXBobmUgZnJvbSAyIHllYXJzIGFnbwpCdXQgSSBjYW4ndCBnZXQgaXQgdG8gd29yaywgSSB0aGluayB0aGlzIG1pZ2h0IGJlIGJlY2F1c2UgdGhlIHNpdGUgaGFzIGNoYW5nZWQuCgpgYGB7cn0KCiMgb25seSB0aGUgZmlyc3QgdGhyZWUgcm93cyBvZiBzb2Nwb2wKIyBLZWVwIG9ubHkgdGhlIGZpcnN0IDMgcm93cwpzb2NfcG9sX3NtYWxsIDwtIHNvY19wb2xbMTozLCBdCgpzb2NfcG9sX3NtYWxsIDwtIHNvY19wb2xfc21hbGwgfD4KICBtdXRhdGUoZmlyc3RuYW1lID0gd29yZChOYWFtLCAxKSkgICMgZXh0cmFjdCBmaXJzdCBuYW1lcwoKIyBJbml0aWFsaXplIGdlbmRlciBjb2x1bW4Kc29jX3BvbF9zbWFsbCRnZW5kZXIgPC0gTkEKCiMgU2V0IHVwIHBvbGl0ZSBzZXNzaW9uCiNzZXNzaW9uIDwtIGJvdygiaHR0cHM6Ly93d3cubWVlcnRlbnMua25hdy5ubC9udmIvbmFhbS9pcyIsIAogIyAgICAgICAgICAgICAgdXNlcl9hZ2VudCA9ICJteWxlbmUuaHVzc29uQHJ1Lm5sIikKCiMgTG9vcCBvdmVyIG9ubHkgdGhlc2UgMyByb3dzCiNmb3IgKGkgaW4gc2VxX2xlbihucm93KHNvY19wb2xfc21hbGwpKSkgewogIAogICNuYW1lX3VybCA8LSBwYXN0ZTAoImh0dHBzOi8vd3d3Lm1lZXJ0ZW5zLmtuYXcubmwvbnZiL25hYW0vaXMvIiwgc29jX3BvbF9zbWFsbCRmaXJzdG5hbWVbaV0pCiAgCiAgI25hbWVfc2Vzc2lvbiA8LSBub2Qoc2Vzc2lvbiwgcGF0aCA9IG5hbWVfdXJsKQogICNuYW1lX3BhZ2UgPC0gc2NyYXBlKG5hbWVfc2Vzc2lvbikKICAKICAjdGFibGVfbGlzdCA8LSBuYW1lX3BhZ2UgJT4lIGh0bWxfdGFibGUoKQogICN0YWJsZV9saXN0W1sxXV1bdGFibGVfbGlzdFtbMV1dID09ICItLSJdIDwtICIwIgogIAogICNpZiAoYXMubnVtZXJpYyh0YWJsZV9saXN0W1sxXV0kWDNbMl0pID4gYXMubnVtZXJpYyh0YWJsZV9saXN0W1sxXV0kWDNbNl0pKSB7CiAgIyAgc29jX3BvbF9zbWFsbCRnZW5kZXJbaV0gPC0gIm1hbGUiCiAgI30gZWxzZSB7CiAgIyAgc29jX3BvbF9zbWFsbCRnZW5kZXJbaV0gPC0gImZlbWFsZSIKICAjfQogIAogICNwcmludChwYXN0ZShpLCBzb2NfcG9sX3NtYWxsJGZpcnN0bmFtZVtpXSwgc29jX3BvbF9zbWFsbCRnZW5kZXJbaV0pKQojfQoKIyBWaWV3IHJlc3VsdHMgZm9yIHRoZSAzIHJvd3MKI1ZpZXcoc29jX3BvbF9zbWFsbCkKYGBgCgo8YnI+CgpGaW5hbGx5LCBJIHJlYWQgdGhlIGxpdGVyYXR1cmUgYW5kIHNjYW5uZWQgY2hhcHRlciA4LgpGb3IgdGhlIGdyYXBocywgcGVyaGFwcyB1c2U6IAppbnN0YWxsLnBhY2thZ2VzKCJwYWsiKQpwYWs6OnBhaygndGhvbWFzcDg1L2dncmFwaCcp</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("lab3.Rmd");
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
