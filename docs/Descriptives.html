<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="MylÃ¨ne Husson" />


<title>Journal 1</title>

<script src="site_libs/header-attrs-2.29/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/clipboard-1.7.1/clipboard.min.js"></script>
<link href="site_libs/primer-tooltips-1.4.0/build.css" rel="stylesheet" />
<link href="site_libs/klippy-0.0.0.9500/css/klippy.min.css" rel="stylesheet" />
<script src="site_libs/klippy-0.0.0.9500/js/klippy.min.js"></script>
<link href="site_libs/font-awesome-6.5.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>




<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>


<link rel="stylesheet" href="tweaks.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    My journal
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="lab1.html">Week 1</a>
    </li>
    <li>
      <a href="lab2.html">Week 2</a>
    </li>
    <li>
      <a href="lab3.html">Week 3</a>
    </li>
    <li>
      <a href="lab4.html">Week 4</a>
    </li>
    <li>
      <a href="lab5.html">Week 5a</a>
    </li>
    <li>
      <a href="lab5tryouts.html">Week 5b</a>
    </li>
    <li>
      <a href="Create_Dataset.html">Week 5c</a>
    </li>
    <li>
      <a href="lab6.html">Week 6</a>
    </li>
    <li>
      <a href="lab7.html">Week 7</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Final Project
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="intro.html">Introduction</a>
    </li>
    <li>
      <a href="theory.html">Theory</a>
    </li>
    <li>
      <a href="DataMethods.html">Data and Methods</a>
    </li>
    <li>
      <a href="dataconstruction.html">Data Construction</a>
    </li>
    <li>
      <a href="Descriptives.html">Descriptive Analyses</a>
    </li>
    <li>
      <a href="Results.html">Exploratory Analyses</a>
    </li>
    <li>
      <a href="Conclusion.html">Conclusion</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://mcmhusson.github.io/labjournal_mylene/">
    <span class="fab fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Journal 1</h1>
<h4 class="author">MylÃ¨ne Husson</h4>

</div>


<script>
  addClassKlippyTo("pre.r, pre.markdown");
  addKlippy('right', 'top', 'auto', '1', 'Copy code', 'Copied!');
</script>
<p>Last compiled on October, 2025 <br> ââââââââââââââââââââââââ</p>
<div id="descriptive-analyses" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Descriptive
Analyses</h1>
<p><br></p>
<p>For the descriptive analyses, I will first identify which triads
occur in the network data, with particular attention to 021C and 030T
triads (RQ1), and then examine the gender distribution within these
specific triads (RQ2). The latter will be illustrated with a plot.</p>
<p>However, before exploring these patterns in detail, I will assess the
overall gender distribution in the network, as well as key structural
characteristics such as density, degree distribution, and clustering, to
provide a clearer understanding of the network as a whole.</p>
<p><br></p>
<p>Load in the data</p>
<pre class="r"><code>load(&quot;./data/processed/result_gender2.rda&quot;)</code></pre>
<p><br></p>
<div id="gender-distribution" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> Gender
distribution</h2>
<p>In the study population, gender was nearly evenly distributed, with
49.70% men and 47.03% women. A small proportion of participants (3.36%,
n = 22) had missing gender information.</p>
<pre class="r"><code>result_gender2$demographics |&gt;
  mutate(gender = ifelse(is.na(gender), &quot;missing&quot;, gender)) |&gt;
  count(gender) |&gt;
  mutate(percent = round(n / sum(n) * 100, 2))</code></pre>
<pre><code>## # A tibble: 3 Ã 3
##   gender      n percent
##   &lt;chr&gt;   &lt;int&gt;   &lt;dbl&gt;
## 1 female    317   47.0 
## 2 male      335   49.7 
## 3 missing    22    3.26</code></pre>
<p><br></p>
</div>
<div id="network-characteristics" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Network
characteristics</h2>
<p>To analyze various network characteristics, I first defined the two
waves and verified that their matrices had matching dimensions, ensuring
that no data were missing. On the diagonal of the network matrix, values
should be zero since self-collaborations are not of interest. A few
cases did not meet this criterion, so I set all diagonal entries in the
adjacency matrix to zero. Finally, I confirmed that the matrices were
not empty.</p>
<pre class="r"><code>wave1 &lt;- result_gender2$nets[1,,]
wave2 &lt;- result_gender2$nets[2,,]

# filter out the waves of the object: we need to check our input
dim(wave1)
dim(wave2)

# you need to have 0 missing values:
sum(is.na(wave1))
sum(is.na(wave2))

#check the diagonal: all places should be 0
sum(diag(wave1)==0)
sum(diag(wave2)==0)

# a few people did work with themselves:
diag(wave1) &lt;- 0
diag(wave2) &lt;- 0

# everything should be 1 or 0:
sum(wave1&gt;1)
sum(wave2&gt;1)

# check if it&#39;s not empty: there are people with 1&#39;s
sum(wave1&gt;0)
sum(wave2&gt;0)

# Create Igraphs for analysis
g1 &lt;- graph_from_adjacency_matrix(wave1, mode = &quot;directed&quot;)
g2 &lt;- graph_from_adjacency_matrix(wave2, mode = &quot;directed&quot;)</code></pre>
<div id="nodes-and-ties" class="section level3" number="1.2.1">
<h3><span class="header-section-number">1.2.1</span> Nodes and ties</h3>
<p>There are 674 researchers in the network; in Wave 1 there are 335
ties in total, and in Wave 2 there are 572, indicating that
collaborative activity increased over time.</p>
<pre class="r"><code># number of nodes wave 1
vcount(g1)</code></pre>
<pre><code>## [1] 674</code></pre>
<pre class="r"><code># number of nodes wave 2
vcount(g2)</code></pre>
<pre><code>## [1] 674</code></pre>
<pre class="r"><code># number of edges wave 1
ecount(g1)</code></pre>
<pre><code>## [1] 335</code></pre>
<pre class="r"><code># number of nodes wave 2
ecount(g2)</code></pre>
<pre><code>## [1] 572</code></pre>
</div>
<div id="density" class="section level3" number="1.2.2">
<h3><span class="header-section-number">1.2.2</span> Density</h3>
<p>The overall network density is low in both waves (Wave 1: 0.00074;
Wave 2: 0.00126), indicating that only a small fraction of all possible
collaborations occurrs. The slight increase from Wave 1 to Wave 2
suggests that collaborative activity became marginally more frequent
over time, although part of this increase may reflect the inclusion of
researchers who joined only in Wave 2 rather than a true rise in
collaborations among existing members</p>
<pre class="r"><code># Wave 1 density
edge_density(g1)</code></pre>
<pre><code>## [1] 0.0007385329</code></pre>
<pre class="r"><code># Wave 2 density
edge_density(g2)</code></pre>
<pre><code>## [1] 0.001261017</code></pre>
</div>
<div id="indegree" class="section level3" number="1.2.3">
<h3><span class="header-section-number">1.2.3</span> Indegree</h3>
<p>In Wave 1, many researchers had no incoming collaborations, with the
most connected reseracher having 5 incoming ties. In Wave 2,
connectivity increased slightly: the mean in-degree rose from 0.50 to
0.85, and the most connected researcher had 14 incoming ties. Overall,
the network remains sparse, but collaborative activity appears to have
increased over time</p>
<pre class="r"><code># Indegree Wave 1
indeg &lt;- igraph::degree(g1, mode = &quot;in&quot;)
summary(indeg)</code></pre>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   0.000   0.000   0.000   0.497   0.000   8.000</code></pre>
<pre class="r"><code># Indegree Wave 2
indeg &lt;- igraph::degree(g2, mode = &quot;in&quot;)
summary(indeg)</code></pre>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##  0.0000  0.0000  0.0000  0.8487  1.0000 14.0000</code></pre>
</div>
<div id="outdegree" class="section level3" number="1.2.4">
<h3><span class="header-section-number">1.2.4</span> Outdegree</h3>
<p>Out-degree distributions indicate that most researchers initiated few
or no collaborations in both waves. In Wave 1, the average out-degree
was 0.50, and the most active researcher initiated 10 collaborations. By
Wave 2, average out-degree increased to 0.85, suggesting that more
researchers engaged in initiating collaborations, even though the
network remains relatively sparse overall.</p>
<pre class="r"><code># Outdegree wave 1
outdeg &lt;- igraph::degree(g1, mode = &quot;out&quot;)
summary(outdeg)</code></pre>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   0.000   0.000   0.000   0.497   1.000  10.000</code></pre>
<pre class="r"><code># Outdegree wave 2
outdeg &lt;- igraph::degree(g2, mode = &quot;out&quot;)
summary(outdeg)</code></pre>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##  0.0000  0.0000  0.0000  0.8487  2.0000  7.0000</code></pre>
</div>
<div id="isolates" class="section level3" number="1.2.5">
<h3><span class="header-section-number">1.2.5</span> Isolates</h3>
<p>The previous analyses suggest the presence of many isolates in the
network. In Wave 1, 443 out of 674 researchers were isolates, while in
Wave 2 the number decreased to 284. This substantial decrease is likely
influenced by the inclusion of researchers who joined only in Wave 2, as
these individuals would appear as isolates if they were artificially
included in the Wave 1 network.</p>
<pre class="r"><code># Isolates Wave 1
row_sums1 &lt;- rowSums(wave1)
col_sums1 &lt;- colSums(wave1)
sum(row_sums1 == 0 &amp; col_sums1 == 0)</code></pre>
<pre><code>## [1] 443</code></pre>
<pre class="r"><code># Isolates Wave 2
row_sums2 &lt;- rowSums(wave2)
col_sums2 &lt;- colSums(wave2)
sum(row_sums2 == 0 &amp; col_sums2 == 0)</code></pre>
<pre><code>## [1] 284</code></pre>
<p><br></p>
</div>
</div>
<div id="triad-census" class="section level2" number="1.3">
<h2><span class="header-section-number">1.3</span> Triad census</h2>
<p>To answer the first research question, I conduct a triad census. This
allows me to see which triadic structures, specifically 021C and 030T,
appear in the observed network at Wave 1 and Wave 2.</p>
<div id="wave-1" class="section level3" number="1.3.1">
<h3><span class="header-section-number">1.3.1</span> Wave 1</h3>
<p>In Wave 1, 021C triads occur 190 times, while 030T triads occur 23
times. This indicates that sequantial triads (021C) are much more common
than transitive triads (030T) during the first observation period.</p>
<pre class="r"><code># Compute triad census (igraph version)
triads &lt;- triad_census(g1)

# Define triad types
triad_types &lt;- c(
  &quot;003&quot;, &quot;012&quot;, &quot;102&quot;, &quot;021D&quot;, &quot;021U&quot;, &quot;021C&quot;, 
  &quot;111D&quot;, &quot;111U&quot;, &quot;030T&quot;, &quot;030C&quot;, &quot;201&quot;, 
  &quot;120D&quot;, &quot;120U&quot;, &quot;120C&quot;, &quot;210&quot;, &quot;300&quot;
)

# Combine into a data frame
triad_table &lt;- data.frame(
  Triad = triad_types,
  Count = as.numeric(triads)
)

triad_table</code></pre>
<pre><code>##    Triad    Count
## 1    003 50611379
## 2    012   159304
## 3    102    31974
## 4   021D      127
## 5   021U      168
## 6   021C      190
## 7   111D      111
## 8   111U      100
## 9   030T       23
## 10  030C        2
## 11   201       19
## 12  120D       10
## 13  120U        7
## 14  120C        4
## 15   210        6
## 16   300        0</code></pre>
</div>
<div id="wave-2" class="section level3" number="1.3.2">
<h3><span class="header-section-number">1.3.2</span> Wave 2</h3>
<p>In Wave 2, both triad types appeared more frequently: 021C occurred
287 times, and 030T appeared 56 times. While this increase suggests an
expansion of triadic structures, the growth may partly reflect the
addition of new individuals to the network rather than a substantive
change in the underlying collaboration patterns.</p>
<pre class="r"><code># Compute triad census (igraph version)
triads &lt;- triad_census(g2)

# Define triad types
triad_types &lt;- c(
  &quot;003&quot;, &quot;012&quot;, &quot;102&quot;, &quot;021D&quot;, &quot;021U&quot;, &quot;021C&quot;, 
  &quot;111D&quot;, &quot;111U&quot;, &quot;030T&quot;, &quot;030C&quot;, &quot;201&quot;, 
  &quot;120D&quot;, &quot;120U&quot;, &quot;120C&quot;, &quot;210&quot;, &quot;300&quot;
)

# Combine into a data frame
triad_table &lt;- data.frame(
  Triad = triad_types,
  Count = as.numeric(triads)
)

triad_table</code></pre>
<pre><code>##    Triad    Count
## 1    003 50463584
## 2    012   295767
## 3    102    42648
## 4   021D      192
## 5   021U      557
## 6   021C      287
## 7   111D      180
## 8   111U       83
## 9   030T       56
## 10  030C        1
## 11   201       15
## 12  120D       19
## 13  120U       13
## 14  120C       11
## 15   210        9
## 16   300        2</code></pre>
</div>
<div id="results" class="section level3" number="1.3.3">
<h3><span class="header-section-number">1.3.3</span> Results</h3>
<p>The answer to the first research question is that both 021C and 030T
triadic structures are present in the network in both waves, with 021C
consistently being the most frequent of the two. The rise in their
occurrence from Wave 1 to Wave 2 points to a general increase in triadic
connectivity, likely driven by network expansion rather than a shift in
structural tendencies.</p>
<p><br></p>
</div>
</div>
<div id="gendered-triads-wave-1" class="section level2" number="1.4">
<h2><span class="header-section-number">1.4</span> Gendered triads Wave
1</h2>
<p>In order to answer the second research question, I need to identify
the gender configurations of the triads 021C and 030T. In order to this,
I first need to create a dataset in which the configurations are linked
to actual nodes, rather than simply counting the number of
configurations as a triad census does.</p>
<p>Creating this dataset is computationally intensive because, for each
person, every possible triad combination must be recorded. Since
individuals must be connected to at least one other person to be part of
a possible triad, isolates can be removed from the dataset. This reduces
the dataset to 231 people in the first wave, which significantly speeds
up the for-each loop.</p>
<div id="dataframe" class="section level3" number="1.4.1">
<h3><span class="header-section-number">1.4.1</span> Dataframe</h3>
<pre class="r"><code>row_sums &lt;- rowSums(wave1)
col_sums &lt;- colSums(wave1)
# sum(row_sums != 0 | col_sums != 0)
# 231 people remain

row_sums &lt;- rowSums(wave1)
col_sums &lt;- colSums(wave1)
nonzero_ties &lt;- which(row_sums != 0 | col_sums != 0)

gender &lt;- result_gender2$demographics$gender

triads &lt;- c(&quot;003&quot;, &quot;012&quot;, &quot;102&quot;, &quot;021D&quot;, &quot;021U&quot;, &quot;021C&quot;, &quot;111D&quot;, &quot;111U&quot;, &quot;030T&quot;, &quot;030C&quot;, &quot;201&quot;, &quot;120D&quot;, &quot;120U&quot;, &quot;120C&quot;, &quot;210&quot;, &quot;300&quot;)

df &lt;- data.frame()

df &lt;- foreach(a1 = nonzero_ties, i = iterators::icount(), .combine = &quot;rbind&quot;) %:%
  foreach(a2 = nonzero_ties, j = iterators::icount(), .combine = &quot;rbind&quot;) %:%
  foreach(a3 = nonzero_ties, k = iterators::icount(), .combine = &quot;rbind&quot;) %do% {
    
    # Print progress for each a1 only
    if (j == 1 &amp;&amp; k == 1) {  # only print once per a1
      print(paste0(&quot;Processing outer node a1=&quot;, a1, &quot; (i=&quot;, i, &quot;)&quot;))
    }
    
    if (i &gt; j &amp; j &gt; k) {  # iteration counts still control loop order
      data.frame(
        i = a1, j = a2, k = a3,           # use a1, a2, a3 as node IDs
        gender_i = gender[a1],             # original node IDs for indexing
        gender_j = gender[a2],
        gender_k = gender[a3],
        t1_ij = as.character(wave1[a1, a2]),
        t1_ji = as.character(wave1[a2, a1]),
        t1_ik = as.character(wave1[a1, a3]),
        t1_ki = as.character(wave1[a3, a1]),
        t1_jk = as.character(wave1[a2, a3]),
        t1_kj = as.character(wave1[a3, a2]),
        type = triads[which(sna::triad.census(wave1[c(a1, a2, a3), c(a1, a2, a3)]) == 1)]
      )
    }
  }

# Optional: create triad name
df$name &lt;- paste0(df$i, &quot;.&quot;, df$j, &quot;.&quot;, df$k)

write.csv(df, &quot;./data/processed/wave1excel.csv&quot;, row.names = FALSE)</code></pre>
<p>Load the file</p>
<pre class="r"><code>wave1excel &lt;- read.csv(&quot;./data/processed/wave1excel.csv&quot;)
head(wave1excel[, 1:13])</code></pre>
<pre><code>##   i j k gender_i gender_j gender_k t1_ij t1_ji t1_ik t1_ki t1_jk t1_kj type
## 1 6 5 2     male   female     male     0     0     0     0     0     0  003
## 2 8 5 2     male   female     male     0     0     0     0     0     0  003
## 3 8 6 2     male     male     male     1     0     0     0     0     0  012
## 4 8 6 5     male     male   female     1     0     0     0     0     0  012
## 5 9 5 2   female   female     male     0     0     0     0     0     0  003
## 6 9 6 2   female     male     male     0     0     0     0     0     0  003</code></pre>
</div>
<div id="analysis" class="section level3" number="1.4.2">
<h3><span class="header-section-number">1.4.2</span> Analysis</h3>
<p>021C</p>
<pre class="r"><code># only keep the triangles we are interested in
# also filter the people with gender = NA out (was one person)
df_filtered &lt;- subset(
  wave1excel,
  type %in% c(&quot;021C&quot;, &quot;030T&quot;) &amp;
    !is.na(gender_i) &amp;
    !is.na(gender_j) &amp;
    !is.na(gender_k)
)

write.csv(df, &quot;./data/processed/df_filtered.csv&quot;, row.names = FALSE)

# Initialize counters for 021C
ffm &lt;- 0
mmf &lt;- 0
mmm &lt;- 0
fff &lt;- 0

# i am so sorry for this for loop :) I know it is horrible to look at but it works and I understand it
for (idx in 1:nrow(df_filtered)) {
  # Tie variables
  t_ij &lt;- df_filtered$t1_ij[idx]
  t_ji &lt;- df_filtered$t1_ji[idx]
  t_ik &lt;- df_filtered$t1_ik[idx]
  t_ki &lt;- df_filtered$t1_ki[idx]
  t_jk &lt;- df_filtered$t1_jk[idx]
  t_kj &lt;- df_filtered$t1_kj[idx]
  
  # Gender variables
  g_i &lt;- df_filtered$gender_i[idx]
  g_j &lt;- df_filtered$gender_j[idx]
  g_k &lt;- df_filtered$gender_k[idx]
  
  # 1) i -&gt; j -&gt; k, open: i -&gt; k must be 0 or NA
  if (t_ij == 1 &amp; t_jk == 1 &amp; !(t_ik == 1)) {
    if (g_i == &quot;female&quot; &amp; g_j == &quot;female&quot; &amp; g_k == &quot;male&quot;) ffm &lt;- ffm + 1
    if (g_i == &quot;male&quot; &amp; g_j == &quot;male&quot; &amp; g_k == &quot;female&quot;) mmf &lt;- mmf + 1
    if (g_i == &quot;male&quot; &amp; g_j == &quot;male&quot; &amp; g_k == &quot;male&quot;) mmm &lt;- mmm + 1
    if (g_i == &quot;female&quot; &amp; g_j == &quot;female&quot; &amp; g_k == &quot;female&quot;) fff &lt;- fff + 1
  }
  
  # 2) i -&gt; k -&gt; j, open: i -&gt; j must be 0 or NA
  if (t_ik == 1 &amp; t_kj == 1 &amp; !(t_ij == 1)) {
    if (g_i == &quot;female&quot; &amp; g_k == &quot;female&quot; &amp; g_j == &quot;male&quot;) ffm &lt;- ffm + 1
    if (g_i == &quot;male&quot; &amp; g_k == &quot;male&quot; &amp; g_j == &quot;female&quot;) mmf &lt;- mmf + 1
    if (g_i == &quot;male&quot; &amp; g_k == &quot;male&quot; &amp; g_j == &quot;male&quot;) mmm &lt;- mmm + 1
    if (g_i == &quot;female&quot; &amp; g_k == &quot;female&quot; &amp; g_j == &quot;female&quot;) fff &lt;- fff + 1
  }
  
  # 3) j -&gt; i -&gt; k, open: j -&gt; k must be 0 or NA
  if (t_ji == 1 &amp; t_ik == 1 &amp; !(t_jk == 1)) {
    if (g_j == &quot;female&quot; &amp; g_i == &quot;female&quot; &amp; g_k == &quot;male&quot;) ffm &lt;- ffm + 1
    if (g_j == &quot;male&quot; &amp; g_i == &quot;male&quot; &amp; g_k == &quot;female&quot;) mmf &lt;- mmf + 1
    if (g_j == &quot;male&quot; &amp; g_i == &quot;male&quot; &amp; g_k == &quot;male&quot;) mmm &lt;- mmm + 1
    if (g_j == &quot;female&quot; &amp; g_i == &quot;female&quot; &amp; g_k == &quot;female&quot;) fff &lt;- fff + 1
  }
  
  # 4) j -&gt; k -&gt; i, open: j -&gt; i must be 0 or NA
  if (t_jk == 1 &amp; t_ki == 1 &amp; !(t_ji == 1)) {
    if (g_j == &quot;female&quot; &amp; g_k == &quot;female&quot; &amp; g_i == &quot;male&quot;) ffm &lt;- ffm + 1
    if (g_j == &quot;male&quot; &amp; g_k == &quot;male&quot; &amp; g_i == &quot;female&quot;) mmf &lt;- mmf + 1
    if (g_j == &quot;male&quot; &amp; g_k == &quot;male&quot; &amp; g_i == &quot;male&quot;) mmm &lt;- mmm + 1
    if (g_j == &quot;female&quot; &amp; g_k == &quot;female&quot; &amp; g_i == &quot;female&quot;) fff &lt;- fff + 1
  }
  
  # 5) k -&gt; i -&gt; j, open: k -&gt; j must be 0 or NA
  if (t_ki == 1 &amp; t_ij == 1 &amp; !(t_kj == 1)) {
    if (g_k == &quot;female&quot; &amp; g_i == &quot;female&quot; &amp; g_j == &quot;male&quot;) ffm &lt;- ffm + 1
    if (g_k == &quot;male&quot; &amp; g_i == &quot;male&quot; &amp; g_j == &quot;female&quot;) mmf &lt;- mmf + 1
    if (g_k == &quot;male&quot; &amp; g_i == &quot;male&quot; &amp; g_j == &quot;male&quot;) mmm &lt;- mmm + 1
    if (g_k == &quot;female&quot; &amp; g_i == &quot;female&quot; &amp; g_j == &quot;female&quot;) fff &lt;- fff + 1
  }
  
  # 6) k -&gt; j -&gt; i, open: k -&gt; i must be 0 or NA
  if (t_kj == 1 &amp; t_ji == 1 &amp; !(t_ki == 1)) {
    if (g_k == &quot;female&quot; &amp; g_j == &quot;female&quot; &amp; g_i == &quot;male&quot;) ffm &lt;- ffm + 1
    if (g_k == &quot;male&quot; &amp; g_j == &quot;male&quot; &amp; g_i == &quot;female&quot;) mmf &lt;- mmf + 1
    if (g_k == &quot;male&quot; &amp; g_j == &quot;male&quot; &amp; g_i == &quot;male&quot;) mmm &lt;- mmm + 1
    if (g_k == &quot;female&quot; &amp; g_j == &quot;female&quot; &amp; g_i == &quot;female&quot;) fff &lt;- fff + 1
  }
}

# Print results
ffm</code></pre>
<pre><code>## [1] 8</code></pre>
<pre class="r"><code>mmf</code></pre>
<pre><code>## [1] 16</code></pre>
<pre class="r"><code>mmm</code></pre>
<pre><code>## [1] 75</code></pre>
<pre class="r"><code>fff</code></pre>
<pre><code>## [1] 14</code></pre>
<p>030T</p>
<pre class="r"><code># Initialize counters for 030T
ffmclosed &lt;- 0
mmfclosed &lt;- 0
mmmclosed &lt;- 0
fffclosed &lt;- 0

for (idx in 1:nrow(df_filtered)) {
  # Assign tie variables for readability
  t_ij &lt;- df_filtered$t1_ij[idx]
  t_ji &lt;- df_filtered$t1_ji[idx]
  t_ik &lt;- df_filtered$t1_ik[idx]
  t_ki &lt;- df_filtered$t1_ki[idx]
  t_jk &lt;- df_filtered$t1_jk[idx]
  t_kj &lt;- df_filtered$t1_kj[idx]
  
  # Assign gender variables for readability
  g_i &lt;- df_filtered$gender_i[idx]
  g_j &lt;- df_filtered$gender_j[idx]
  g_k &lt;- df_filtered$gender_k[idx]
  
  # 1) i -&gt; j -&gt; k, closed: i -&gt; k exists
  if (t_ij == 1 &amp; t_jk == 1 &amp; t_ik == 1) {
    if (g_i == &quot;female&quot; &amp; g_j == &quot;female&quot; &amp; g_k == &quot;male&quot;) ffmclosed &lt;- ffmclosed + 1
    if (g_i == &quot;male&quot; &amp; g_j == &quot;male&quot; &amp; g_k == &quot;female&quot;) mmfclosed &lt;- mmfclosed + 1
    if (g_i == &quot;male&quot; &amp; g_j == &quot;male&quot; &amp; g_k == &quot;male&quot;) mmmclosed &lt;- mmmclosed + 1
    if (g_i == &quot;female&quot; &amp; g_j == &quot;female&quot; &amp; g_k == &quot;female&quot;) fffclosed &lt;- fffclosed + 1
  }
  
  # 2) i -&gt; k -&gt; j, closed: i -&gt; j exists
  if (t_ik == 1 &amp; t_kj == 1 &amp; t_ij == 1) {
    if (g_i == &quot;female&quot; &amp; g_k == &quot;female&quot; &amp; g_j == &quot;male&quot;) ffmclosed &lt;- ffmclosed + 1
    if (g_i == &quot;male&quot; &amp; g_k == &quot;male&quot; &amp; g_j == &quot;female&quot;) mmfclosed &lt;- mmfclosed + 1
    if (g_i == &quot;male&quot; &amp; g_k == &quot;male&quot; &amp; g_j == &quot;male&quot;) mmmclosed &lt;- mmmclosed + 1
    if (g_i == &quot;female&quot; &amp; g_k == &quot;female&quot; &amp; g_j == &quot;female&quot;) fffclosed &lt;- fffclosed + 1
  }
  
  # 3) j -&gt; i -&gt; k, closed: j -&gt; k exists
  if (t_ji == 1 &amp; t_ik == 1 &amp; t_jk == 1) {
    if (g_j == &quot;female&quot; &amp; g_i == &quot;female&quot; &amp; g_k == &quot;male&quot;) ffmclosed &lt;- ffmclosed + 1
    if (g_j == &quot;male&quot; &amp; g_i == &quot;male&quot; &amp; g_k == &quot;female&quot;) mmfclosed &lt;- mmfclosed + 1
    if (g_j == &quot;male&quot; &amp; g_i == &quot;male&quot; &amp; g_k == &quot;male&quot;) mmmclosed &lt;- mmmclosed + 1
    if (g_j == &quot;female&quot; &amp; g_i == &quot;female&quot; &amp; g_k == &quot;female&quot;) fffclosed &lt;- fffclosed + 1
  }
  
  # 4) j -&gt; k -&gt; i, closed: j -&gt; i exists
  if (t_jk == 1 &amp; t_ki == 1 &amp; t_ji == 1) {
    if (g_j == &quot;female&quot; &amp; g_k == &quot;female&quot; &amp; g_i == &quot;male&quot;) ffmclosed &lt;- ffmclosed + 1
    if (g_j == &quot;male&quot; &amp; g_k == &quot;male&quot; &amp; g_i == &quot;female&quot;) mmfclosed &lt;- mmfclosed + 1
    if (g_j == &quot;male&quot; &amp; g_k == &quot;male&quot; &amp; g_i == &quot;male&quot;) mmmclosed &lt;- mmmclosed + 1
    if (g_j == &quot;female&quot; &amp; g_k == &quot;female&quot; &amp; g_i == &quot;female&quot;) fffclosed &lt;- fffclosed + 1
  }
  
  # 5) k -&gt; i -&gt; j, closed: k -&gt; j exists
  if (t_ki == 1 &amp; t_ij == 1 &amp; t_kj == 1) {
    if (g_k == &quot;female&quot; &amp; g_i == &quot;female&quot; &amp; g_j == &quot;male&quot;) ffmclosed &lt;- ffmclosed + 1
    if (g_k == &quot;male&quot; &amp; g_i == &quot;male&quot; &amp; g_j == &quot;female&quot;) mmfclosed &lt;- mmfclosed + 1
    if (g_k == &quot;male&quot; &amp; g_i == &quot;male&quot; &amp; g_j == &quot;male&quot;) mmmclosed &lt;- mmmclosed + 1
    if (g_k == &quot;female&quot; &amp; g_i == &quot;female&quot; &amp; g_j == &quot;female&quot;) fffclosed &lt;- fffclosed + 1
  }
  
  # 6) k -&gt; j -&gt; i, closed: k -&gt; i exists
  if (t_kj == 1 &amp; t_ji == 1 &amp; t_ki == 1) {
    if (g_k == &quot;female&quot; &amp; g_j == &quot;female&quot; &amp; g_i == &quot;male&quot;) ffmclosed &lt;- ffmclosed + 1
    if (g_k == &quot;male&quot; &amp; g_j == &quot;male&quot; &amp; g_i == &quot;female&quot;) mmfclosed &lt;- mmfclosed + 1
    if (g_k == &quot;male&quot; &amp; g_j == &quot;male&quot; &amp; g_i == &quot;male&quot;) mmmclosed &lt;- mmmclosed + 1
    if (g_k == &quot;female&quot; &amp; g_j == &quot;female&quot; &amp; g_i == &quot;female&quot;) fffclosed &lt;- fffclosed + 1
  }
}

# Print results
ffmclosed</code></pre>
<pre><code>## [1] 1</code></pre>
<pre class="r"><code>mmfclosed</code></pre>
<pre><code>## [1] 1</code></pre>
<pre class="r"><code>mmmclosed</code></pre>
<pre><code>## [1] 9</code></pre>
<pre class="r"><code>fffclosed</code></pre>
<pre><code>## [1] 5</code></pre>
</div>
<div id="results-1" class="section level3" number="1.4.3">
<h3><span class="header-section-number">1.4.3</span> Results</h3>
<p>Based on the analyses above, the second research question can be
addressed. This research question was descriptive, focusing on how
gender is distributed across the triadic structures 021C and 031T
observed in the network.</p>
<p><img src="images/dis_prop_gender3.png" /></p>
<p>Although the overall network is approximately gender balanced (47.0%
female and 49.7% male), the composition of the 021C and 031T triadic
types in Wave 1 reveals a clear over-representation of all-male groups.
In 021C triads, nearly 40% are composed entirely of men, compared to
only 7% all-female triads. A similar pattern appears in 031T triads,
where 39% are all-male and 22% all-female. Triads in which A and B are
the same gender but C differs (female-female-male or male-male-female)
are considerably less frequent, particularly those with a female
majority (female-female-male).</p>
<p>For 031T triads specifically, same gender triads are especially
pronounced. Approximately 61% of these triads consist entirely of one
gender (either all-male or all-female), while only around 8% are of the
female-female-male or male-male-female type. Given the overall gender
balance of the network, this indicates that transitive or tightly
interconnected triads tend to form within same-gender groups rather than
across them, particularly in all-male triads.</p>
<p>Taken together, the results addressing the second research question
reveal gendered structuring within the 021C and 031T triads, suggesting
that these network configurations are shaped by gender-based tendencies
in tie formation.</p>
<p><br></p>
</div>
<div id="graph-021c-030t-triads" class="section level3" number="1.4.4">
<h3><span class="header-section-number">1.4.4</span> Graph 021C 030T
Triads</h3>
<p>Now, to visualize the network of 021C triads and 030T triads I turn
the dataset âdf_filteredâ from Wave 1 back into an adjaceny matrix and
create a gender list for those people.</p>
<pre class="r"><code># Assuming your dataframe is called df_filtered
df3 &lt;- df_filtered

# Identify all unique node IDs from i, j, k
nodes &lt;- sort(unique(c(df3$i, df3$j, df3$k)))

# Create empty adjacency matrix
adj_mat &lt;- matrix(0, nrow = length(nodes), ncol = length(nodes))
rownames(adj_mat) &lt;- nodes
colnames(adj_mat) &lt;- nodes

# Fill adjacency matrix
for (row in 1:nrow(df3)) {
  i &lt;- df3$i[row]
  j &lt;- df3$j[row]
  k &lt;- df3$k[row]
  
  # Make sure to only assign if the column exists in the matrix
  if (df3$t1_ij[row] == 1) adj_mat[as.character(i), as.character(j)] &lt;- 1
  if (df3$t1_ji[row] == 1) adj_mat[as.character(j), as.character(i)] &lt;- 1
  if (df3$t1_ik[row] == 1) adj_mat[as.character(i), as.character(k)] &lt;- 1
  if (df3$t1_ki[row] == 1) adj_mat[as.character(k), as.character(i)] &lt;- 1
  if (df3$t1_jk[row] == 1) adj_mat[as.character(j), as.character(k)] &lt;- 1
  if (df3$t1_kj[row] == 1) adj_mat[as.character(k), as.character(j)] &lt;- 1
}

# View adjacency matrix
# View(adj_mat)

#check
#row_sums &lt;- rowSums(adj_mat)
#col_sums &lt;- colSums(adj_mat)
#sum(row_sums == 0 &amp; col_sums == 0)

# Create gender vector matching the order of nodes in adj_mat
gender_vec &lt;- sapply(rownames(adj_mat), function(node) {
  node &lt;- as.character(node)
  
  # Check which column contains this node
  if (node %in% df3$i) {
    df3$gender_i[which(df3$i == node)[1]]  # first occurrence
  } else if (node %in% df3$j) {
    df3$gender_j[which(df3$j == node)[1]]
  } else if (node %in% df3$k) {
    df3$gender_k[which(df3$k == node)[1]]
  } else {
    NA  # fallback
  }
})

# Check the result
# View(gender_vec)</code></pre>
<p>Figure 1 below visualizes the gender distribution in the network of
individuals involved in 021C and 030T triads. Men appear more frequently
in the network and are spread widely across various clusters. Several
male-dominated clusters are visible, suggesting a stronger male presence
in the formation of these triads. While women are less numerous, they
also form noticeable clusters, often on the networkâs periphery.
Overall, the structure suggests gendered patterns of connection, with
men occupying more central and interconnected positions, and women
appearing more often in smaller, more localized groups.</p>
<pre class="r"><code># Create igraph object from adjacency matrix
g &lt;- graph_from_adjacency_matrix(adj_mat, mode = &quot;directed&quot;, diag = FALSE)

# Map gender to colors
# Adjust the values in gender_vec if they are not exactly &quot;male&quot;/&quot;female&quot;
node_colors &lt;- ifelse(gender_vec == &quot;female&quot;, &quot;darkorange&quot;, &quot;lightblue&quot;)

# Plot the graph
plot(g,
     vertex.color = node_colors,   # gender colors
     vertex.label = NA,            # remove labels
     vertex.size = 5,              # small nodes
     edge.arrow.size = 0.2,        # smaller arrowheads
     layout = layout_with_fr(g),   # pass the graph
     main = &quot;Figure 1. Gender distribution in 021C and 030T triads in wave 1&quot;)

# Add legend
legend(&quot;topleft&quot;,                     # position of legend
       legend = c(&quot;Female&quot;, &quot;Male&quot;),  # labels
       col = c(&quot;darkorange&quot;, &quot;lightblue&quot;),# colors
       pch = 19,                      # solid circle
       pt.cex = 1.5,                  # size of the circles in legend
       bty = &quot;n&quot;)                     # no box around legend</code></pre>
<p><img src="Descriptives_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<p><br></p>
</div>
</div>
<div id="gendered-triads-wave-2" class="section level2" number="1.5">
<h2><span class="header-section-number">1.5</span> Gendered triads wave
2</h2>
<p>The code I developed to analyze gender distribution within the 021C
and 030T triads can also be applied to wave 2 by simply replacing every
instance of âwave1â with âwave2.â However, because wave 2 contains fewer
isolates, the for-each loop would need to iterate over a much larger
number of individuals. Based on my calculations, this process would take
approximately three days to complete. As I did not have three
consecutive days during which I did not need to use R, running the full
analysis for Wave 2 was not feasible at this time. I hope my
demonstration of how I approached this for Wave 1 suffices for now.</p>
</div>
</div>

<div id="rmd-source-code">LS0tCnRpdGxlOiAiSm91cm5hbCAxIgpiaWJsaW9ncmFwaHk6IHJlZmVyZW5jZXMuYmliCmF1dGhvcjogIk15bMOobmUgSHVzc29uIgotLS0KCmBgYHtyLCBlY2hvPUZBTFNFLCBpbmNsdWRlPVRSVUUsIHJlc3VsdHM9J2hpZGUnLCBtZXNzYWdlPUZBTFNFLCB3YXJuaW5nPUZBTFNFfQpsaWJyYXJ5KGtuaXRyKQpsaWJyYXJ5KHRpZHl2ZXJzZSkKbGlicmFyeShzY2hvbGFyKQpsaWJyYXJ5KG9wZW5hbGV4UikKbGlicmFyeShydmVzdCkKbGlicmFyeShqc29ubGl0ZSkKbGlicmFyeShodHRyKQpsaWJyYXJ5KHJ2ZXN0KQpsaWJyYXJ5KHJlc2hhcGUyKQpsaWJyYXJ5KHhtbDIpCmxpYnJhcnkob3Blbnhsc3gpCmxpYnJhcnkocG9saXRlKQpsaWJyYXJ5KGlncmFwaCkKbGlicmFyeShzbmEpCmxpYnJhcnkoZ2VuZGVyaXplUikKbGlicmFyeShSU2VsZW5pdW0pCmxpYnJhcnkobmV0c3RhdCkKbGlicmFyeShwaW5ncikKbGlicmFyeShSU2llbmEpCmxpYnJhcnkoZGV2dG9vbHMpCmxpYnJhcnkoUnNpZW5hVHdvU3RlcCkKCgojIGxvYWQgdGhlIGZ1bmN0aW9ucyB5b3UgbmVlZCBmcm9tIHRoZSBwYWNrYWdlcwpmcGFja2FnZS5jaGVjayA8LSBmdW5jdGlvbihwYWNrYWdlcykgewogIGxhcHBseShwYWNrYWdlcywgRlVOID0gZnVuY3Rpb24oeCkgewogICAgaWYgKCFyZXF1aXJlKHgsIGNoYXJhY3Rlci5vbmx5ID0gVFJVRSkpIHsKICAgICAgaW5zdGFsbC5wYWNrYWdlcyh4LCBkZXBlbmRlbmNpZXMgPSBUUlVFKQogICAgICBsaWJyYXJ5KHgsIGNoYXJhY3Rlci5vbmx5ID0gVFJVRSkKICAgIH0KICB9KQp9Cgpmc2F2ZSA8LSBmdW5jdGlvbih4LCBmaWxlID0gTlVMTCwgbG9jYXRpb24gPSAiLi9kYXRhL3Byb2Nlc3NlZC8iKSB7CiAgaWZlbHNlKCFkaXIuZXhpc3RzKCJkYXRhIiksIGRpci5jcmVhdGUoImRhdGEiKSwgRkFMU0UpCiAgaWZlbHNlKCFkaXIuZXhpc3RzKCJkYXRhL3Byb2Nlc3NlZCIpLCBkaXIuY3JlYXRlKCJkYXRhL3Byb2Nlc3NlZCIpLCBGQUxTRSkKICAKICBpZiAoaXMubnVsbChmaWxlKSkgewogICAgZmlsZSA8LSBkZXBhcnNlKHN1YnN0aXR1dGUoeCkpCiAgfQogIAogIGRhdGVuYW1lIDwtIHN1YnN0cihnc3ViKCJbOi1dIiwgIiIsIFN5cy50aW1lKCkpLCAxLCA4KQogIHRvdGFsbmFtZSA8LSBwYXN0ZShsb2NhdGlvbiwgZGF0ZW5hbWUsIGZpbGUsICIucmRhIiwgc2VwID0gIiIpCiAgc2F2ZSh4LCBmaWxlID0gdG90YWxuYW1lKSAgIyBuZWVkIHRvIGZpeCBpZiBmaWxlIGlzIHJlbG9hZGVkIGFzIGlucHV0IG5hbWUsIG5vdCBhcyB4Lgp9CgpmbG9hZCA8LSBmdW5jdGlvbihmaWxlbmFtZSkgewogIGxvYWQoZmlsZW5hbWUpCiAgZ2V0KGxzKClbbHMoKSAhPSAiZmlsZW5hbWUiXSkKfQoKZnNob3dkZiA8LSBmdW5jdGlvbih4LCAuLi4pIHsKICBrbml0cjo6a2FibGUoeCwgZGlnaXRzID0gMiwgImh0bWwiLCAuLi4pICU+JQogICAga2FibGVFeHRyYTo6a2FibGVfc3R5bGluZyhib290c3RyYXBfb3B0aW9ucyA9IGMoInN0cmlwZWQiLCAiaG92ZXIiKSkgJT4lCiAgICBrYWJsZUV4dHJhOjpzY3JvbGxfYm94KHdpZHRoID0gIjEwMCUiLCBoZWlnaHQgPSAiMzAwcHgiKQp9CmBgYAoKYGBge3Iga2xpcHB5LCBlY2hvPUZBTFNFLCBpbmNsdWRlPVRSVUV9CmtsaXBweTo6a2xpcHB5KHBvc2l0aW9uID0gYygndG9wJywgJ3JpZ2h0JykpCiNrbGlwcHk6OmtsaXBweShjb2xvciA9ICdkYXJrcmVkJykKI2tsaXBweTo6a2xpcHB5KHRvb2x0aXBfbWVzc2FnZSA9ICdDbGljayB0byBjb3B5JywgdG9vbHRpcF9zdWNjZXNzID0gJ0RvbmUnKQpgYGAKCkxhc3QgY29tcGlsZWQgb24gYHIgZm9ybWF0KFN5cy50aW1lKCksICclQiwgJVknKWAKPGJyPgotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiMgRGVzY3JpcHRpdmUgQW5hbHlzZXMKPGJyPgoKRm9yIHRoZSBkZXNjcmlwdGl2ZSBhbmFseXNlcywgSSB3aWxsIGZpcnN0IGlkZW50aWZ5IHdoaWNoIHRyaWFkcyBvY2N1ciBpbiB0aGUgbmV0d29yayBkYXRhLCB3aXRoIHBhcnRpY3VsYXIgYXR0ZW50aW9uIHRvIDAyMUMgYW5kIDAzMFQgdHJpYWRzIChSUTEpLCBhbmQgdGhlbiBleGFtaW5lIHRoZSBnZW5kZXIgZGlzdHJpYnV0aW9uIHdpdGhpbiB0aGVzZSBzcGVjaWZpYyB0cmlhZHMgKFJRMikuIFRoZSBsYXR0ZXIgd2lsbCBiZSBpbGx1c3RyYXRlZCB3aXRoIGEgcGxvdC4KCkhvd2V2ZXIsIGJlZm9yZSBleHBsb3JpbmcgdGhlc2UgcGF0dGVybnMgaW4gZGV0YWlsLCBJIHdpbGwgYXNzZXNzIHRoZSBvdmVyYWxsIGdlbmRlciBkaXN0cmlidXRpb24gaW4gdGhlIG5ldHdvcmssIGFzIHdlbGwgYXMga2V5IHN0cnVjdHVyYWwgY2hhcmFjdGVyaXN0aWNzIHN1Y2ggYXMgZGVuc2l0eSwgZGVncmVlIGRpc3RyaWJ1dGlvbiwgYW5kIGNsdXN0ZXJpbmcsIHRvIHByb3ZpZGUgYSBjbGVhcmVyIHVuZGVyc3RhbmRpbmcgb2YgdGhlIG5ldHdvcmsgYXMgYSB3aG9sZS4KCjxicj4KCkxvYWQgaW4gdGhlIGRhdGEKYGBge3J9CmxvYWQoIi4vZGF0YS9wcm9jZXNzZWQvcmVzdWx0X2dlbmRlcjIucmRhIikKYGBgCgo8YnI+CgojIyBHZW5kZXIgZGlzdHJpYnV0aW9uCgpJbiB0aGUgc3R1ZHkgcG9wdWxhdGlvbiwgZ2VuZGVyIHdhcyBuZWFybHkgZXZlbmx5IGRpc3RyaWJ1dGVkLCB3aXRoIDQ5LjcwJSBtZW4gYW5kIDQ3LjAzJSB3b21lbi4gQSBzbWFsbCBwcm9wb3J0aW9uIG9mIHBhcnRpY2lwYW50cyAoMy4zNiUsIG4gPSAyMikgaGFkIG1pc3NpbmcgZ2VuZGVyIGluZm9ybWF0aW9uLgoKYGBge3J9CnJlc3VsdF9nZW5kZXIyJGRlbW9ncmFwaGljcyB8PgogIG11dGF0ZShnZW5kZXIgPSBpZmVsc2UoaXMubmEoZ2VuZGVyKSwgIm1pc3NpbmciLCBnZW5kZXIpKSB8PgogIGNvdW50KGdlbmRlcikgfD4KICBtdXRhdGUocGVyY2VudCA9IHJvdW5kKG4gLyBzdW0obikgKiAxMDAsIDIpKQpgYGAKCjxicj4KCiMjIE5ldHdvcmsgY2hhcmFjdGVyaXN0aWNzCgpUbyBhbmFseXplIHZhcmlvdXMgbmV0d29yayBjaGFyYWN0ZXJpc3RpY3MsIEkgZmlyc3QgZGVmaW5lZCB0aGUgdHdvIHdhdmVzIGFuZCB2ZXJpZmllZCB0aGF0IHRoZWlyIG1hdHJpY2VzIGhhZCBtYXRjaGluZyBkaW1lbnNpb25zLCBlbnN1cmluZyB0aGF0IG5vIGRhdGEgd2VyZSBtaXNzaW5nLiBPbiB0aGUgZGlhZ29uYWwgb2YgdGhlIG5ldHdvcmsgbWF0cml4LCB2YWx1ZXMgc2hvdWxkIGJlIHplcm8gc2luY2Ugc2VsZi1jb2xsYWJvcmF0aW9ucyBhcmUgbm90IG9mIGludGVyZXN0LiBBIGZldyBjYXNlcyBkaWQgbm90IG1lZXQgdGhpcyBjcml0ZXJpb24sIHNvIEkgc2V0IGFsbCBkaWFnb25hbCBlbnRyaWVzIGluIHRoZSBhZGphY2VuY3kgbWF0cml4IHRvIHplcm8uIEZpbmFsbHksIEkgY29uZmlybWVkIHRoYXQgdGhlIG1hdHJpY2VzIHdlcmUgbm90IGVtcHR5LgoKYGBge3IgZWNobz1UUlVFLCBpbmNsdWRlPVRSVUUsIHJlc3VsdHM9J2hpZGUnfQp3YXZlMSA8LSByZXN1bHRfZ2VuZGVyMiRuZXRzWzEsLF0Kd2F2ZTIgPC0gcmVzdWx0X2dlbmRlcjIkbmV0c1syLCxdCgojIGZpbHRlciBvdXQgdGhlIHdhdmVzIG9mIHRoZSBvYmplY3Q6IHdlIG5lZWQgdG8gY2hlY2sgb3VyIGlucHV0CmRpbSh3YXZlMSkKZGltKHdhdmUyKQoKIyB5b3UgbmVlZCB0byBoYXZlIDAgbWlzc2luZyB2YWx1ZXM6CnN1bShpcy5uYSh3YXZlMSkpCnN1bShpcy5uYSh3YXZlMikpCgojY2hlY2sgdGhlIGRpYWdvbmFsOiBhbGwgcGxhY2VzIHNob3VsZCBiZSAwCnN1bShkaWFnKHdhdmUxKT09MCkKc3VtKGRpYWcod2F2ZTIpPT0wKQoKIyBhIGZldyBwZW9wbGUgZGlkIHdvcmsgd2l0aCB0aGVtc2VsdmVzOgpkaWFnKHdhdmUxKSA8LSAwCmRpYWcod2F2ZTIpIDwtIDAKCiMgZXZlcnl0aGluZyBzaG91bGQgYmUgMSBvciAwOgpzdW0od2F2ZTE+MSkKc3VtKHdhdmUyPjEpCgojIGNoZWNrIGlmIGl0J3Mgbm90IGVtcHR5OiB0aGVyZSBhcmUgcGVvcGxlIHdpdGggMSdzCnN1bSh3YXZlMT4wKQpzdW0od2F2ZTI+MCkKCiMgQ3JlYXRlIElncmFwaHMgZm9yIGFuYWx5c2lzCmcxIDwtIGdyYXBoX2Zyb21fYWRqYWNlbmN5X21hdHJpeCh3YXZlMSwgbW9kZSA9ICJkaXJlY3RlZCIpCmcyIDwtIGdyYXBoX2Zyb21fYWRqYWNlbmN5X21hdHJpeCh3YXZlMiwgbW9kZSA9ICJkaXJlY3RlZCIpCgpgYGAKIyMjIE5vZGVzIGFuZCB0aWVzCgpUaGVyZSBhcmUgNjc0IHJlc2VhcmNoZXJzIGluIHRoZSBuZXR3b3JrOyBpbiBXYXZlIDEgdGhlcmUgYXJlIDMzNSB0aWVzIGluIHRvdGFsLCBhbmQgaW4gV2F2ZSAyIHRoZXJlIGFyZSA1NzIsIGluZGljYXRpbmcgdGhhdCBjb2xsYWJvcmF0aXZlIGFjdGl2aXR5IGluY3JlYXNlZCBvdmVyIHRpbWUuCmBgYHtyfQojIG51bWJlciBvZiBub2RlcyB3YXZlIDEKdmNvdW50KGcxKQoKIyBudW1iZXIgb2Ygbm9kZXMgd2F2ZSAyCnZjb3VudChnMikKCiMgbnVtYmVyIG9mIGVkZ2VzIHdhdmUgMQplY291bnQoZzEpCgojIG51bWJlciBvZiBub2RlcyB3YXZlIDIKZWNvdW50KGcyKQpgYGAKCiMjIyBEZW5zaXR5CgpUaGUgb3ZlcmFsbCBuZXR3b3JrIGRlbnNpdHkgaXMgbG93IGluIGJvdGggd2F2ZXMgKFdhdmUgMTogMC4wMDA3NDsgV2F2ZSAyOiAwLjAwMTI2KSwgaW5kaWNhdGluZyB0aGF0IG9ubHkgYSBzbWFsbCBmcmFjdGlvbiBvZiBhbGwgcG9zc2libGUgY29sbGFib3JhdGlvbnMgb2NjdXJycy4gVGhlIHNsaWdodCBpbmNyZWFzZSBmcm9tIFdhdmUgMSB0byBXYXZlIDIgc3VnZ2VzdHMgdGhhdCBjb2xsYWJvcmF0aXZlIGFjdGl2aXR5IGJlY2FtZSBtYXJnaW5hbGx5IG1vcmUgZnJlcXVlbnQgb3ZlciB0aW1lLCBhbHRob3VnaCBwYXJ0IG9mIHRoaXMgaW5jcmVhc2UgbWF5IHJlZmxlY3QgdGhlIGluY2x1c2lvbiBvZiByZXNlYXJjaGVycyB3aG8gam9pbmVkIG9ubHkgaW4gV2F2ZSAyIHJhdGhlciB0aGFuIGEgdHJ1ZSByaXNlIGluIGNvbGxhYm9yYXRpb25zIGFtb25nIGV4aXN0aW5nIG1lbWJlcnMKCmBgYHtyfQojIFdhdmUgMSBkZW5zaXR5CmVkZ2VfZGVuc2l0eShnMSkKCiMgV2F2ZSAyIGRlbnNpdHkKZWRnZV9kZW5zaXR5KGcyKQpgYGAKCiMjIyBJbmRlZ3JlZQoKSW4gV2F2ZSAxLCBtYW55IHJlc2VhcmNoZXJzIGhhZCBubyBpbmNvbWluZyBjb2xsYWJvcmF0aW9ucywgd2l0aCB0aGUgbW9zdCBjb25uZWN0ZWQgcmVzZXJhY2hlciBoYXZpbmcgNSBpbmNvbWluZyB0aWVzLiBJbiBXYXZlIDIsIGNvbm5lY3Rpdml0eSBpbmNyZWFzZWQgc2xpZ2h0bHk6IHRoZSBtZWFuIGluLWRlZ3JlZSByb3NlIGZyb20gMC41MCB0byAwLjg1LCBhbmQgdGhlIG1vc3QgY29ubmVjdGVkIHJlc2VhcmNoZXIgaGFkIDE0IGluY29taW5nIHRpZXMuIE92ZXJhbGwsIHRoZSBuZXR3b3JrIHJlbWFpbnMgc3BhcnNlLCBidXQgY29sbGFib3JhdGl2ZSBhY3Rpdml0eSBhcHBlYXJzIHRvIGhhdmUgaW5jcmVhc2VkIG92ZXIgdGltZQpgYGB7cn0KIyBJbmRlZ3JlZSBXYXZlIDEKaW5kZWcgPC0gaWdyYXBoOjpkZWdyZWUoZzEsIG1vZGUgPSAiaW4iKQpzdW1tYXJ5KGluZGVnKQoKIyBJbmRlZ3JlZSBXYXZlIDIKaW5kZWcgPC0gaWdyYXBoOjpkZWdyZWUoZzIsIG1vZGUgPSAiaW4iKQpzdW1tYXJ5KGluZGVnKQoKYGBgCiMjIyBPdXRkZWdyZWUKCk91dC1kZWdyZWUgZGlzdHJpYnV0aW9ucyBpbmRpY2F0ZSB0aGF0IG1vc3QgcmVzZWFyY2hlcnMgaW5pdGlhdGVkIGZldyBvciBubyBjb2xsYWJvcmF0aW9ucyBpbiBib3RoIHdhdmVzLiBJbiBXYXZlIDEsIHRoZSBhdmVyYWdlIG91dC1kZWdyZWUgd2FzIDAuNTAsIGFuZCB0aGUgbW9zdCBhY3RpdmUgcmVzZWFyY2hlciBpbml0aWF0ZWQgMTAgY29sbGFib3JhdGlvbnMuIEJ5IFdhdmUgMiwgYXZlcmFnZSBvdXQtZGVncmVlIGluY3JlYXNlZCB0byAwLjg1LCBzdWdnZXN0aW5nIHRoYXQgbW9yZSByZXNlYXJjaGVycyBlbmdhZ2VkIGluIGluaXRpYXRpbmcgY29sbGFib3JhdGlvbnMsIGV2ZW4gdGhvdWdoIHRoZSBuZXR3b3JrIHJlbWFpbnMgcmVsYXRpdmVseSBzcGFyc2Ugb3ZlcmFsbC4KYGBge3J9CiMgT3V0ZGVncmVlIHdhdmUgMQpvdXRkZWcgPC0gaWdyYXBoOjpkZWdyZWUoZzEsIG1vZGUgPSAib3V0IikKc3VtbWFyeShvdXRkZWcpCgojIE91dGRlZ3JlZSB3YXZlIDIKb3V0ZGVnIDwtIGlncmFwaDo6ZGVncmVlKGcyLCBtb2RlID0gIm91dCIpCnN1bW1hcnkob3V0ZGVnKQpgYGAKIyMjIElzb2xhdGVzCgpUaGUgcHJldmlvdXMgYW5hbHlzZXMgc3VnZ2VzdCB0aGUgcHJlc2VuY2Ugb2YgbWFueSBpc29sYXRlcyBpbiB0aGUgbmV0d29yay4gSW4gV2F2ZSAxLCA0NDMgb3V0IG9mIDY3NCByZXNlYXJjaGVycyB3ZXJlIGlzb2xhdGVzLCB3aGlsZSBpbiBXYXZlIDIgdGhlIG51bWJlciBkZWNyZWFzZWQgdG8gMjg0LiBUaGlzIHN1YnN0YW50aWFsIGRlY3JlYXNlIGlzIGxpa2VseSBpbmZsdWVuY2VkIGJ5IHRoZSBpbmNsdXNpb24gb2YgcmVzZWFyY2hlcnMgd2hvIGpvaW5lZCBvbmx5IGluIFdhdmUgMiwgYXMgdGhlc2UgaW5kaXZpZHVhbHMgd291bGQgYXBwZWFyIGFzIGlzb2xhdGVzIGlmIHRoZXkgd2VyZSBhcnRpZmljaWFsbHkgaW5jbHVkZWQgaW4gdGhlIFdhdmUgMSBuZXR3b3JrLgpgYGB7cn0KIyBJc29sYXRlcyBXYXZlIDEKcm93X3N1bXMxIDwtIHJvd1N1bXMod2F2ZTEpCmNvbF9zdW1zMSA8LSBjb2xTdW1zKHdhdmUxKQpzdW0ocm93X3N1bXMxID09IDAgJiBjb2xfc3VtczEgPT0gMCkKCiMgSXNvbGF0ZXMgV2F2ZSAyCnJvd19zdW1zMiA8LSByb3dTdW1zKHdhdmUyKQpjb2xfc3VtczIgPC0gY29sU3Vtcyh3YXZlMikKc3VtKHJvd19zdW1zMiA9PSAwICYgY29sX3N1bXMyID09IDApCmBgYAoKPGJyPgoKIyMgVHJpYWQgY2Vuc3VzCgpUbyBhbnN3ZXIgdGhlIGZpcnN0IHJlc2VhcmNoIHF1ZXN0aW9uLCBJIGNvbmR1Y3QgYSB0cmlhZCBjZW5zdXMuIFRoaXMgYWxsb3dzIG1lIHRvIHNlZSB3aGljaCB0cmlhZGljIHN0cnVjdHVyZXMsIHNwZWNpZmljYWxseSAwMjFDIGFuZCAwMzBULCBhcHBlYXIgaW4gdGhlIG9ic2VydmVkIG5ldHdvcmsgYXQgV2F2ZSAxIGFuZCBXYXZlIDIuIAoKIyMjIFdhdmUgMQoKSW4gV2F2ZSAxLCAwMjFDIHRyaWFkcyBvY2N1ciAxOTAgdGltZXMsIHdoaWxlIDAzMFQgdHJpYWRzIG9jY3VyIDIzIHRpbWVzLiBUaGlzIGluZGljYXRlcyB0aGF0IHNlcXVhbnRpYWwgdHJpYWRzICgwMjFDKSBhcmUgbXVjaCBtb3JlIGNvbW1vbiB0aGFuIHRyYW5zaXRpdmUgdHJpYWRzICgwMzBUKSBkdXJpbmcgdGhlIGZpcnN0IG9ic2VydmF0aW9uIHBlcmlvZC4KCmBgYHtyfQojIENvbXB1dGUgdHJpYWQgY2Vuc3VzIChpZ3JhcGggdmVyc2lvbikKdHJpYWRzIDwtIHRyaWFkX2NlbnN1cyhnMSkKCiMgRGVmaW5lIHRyaWFkIHR5cGVzCnRyaWFkX3R5cGVzIDwtIGMoCiAgIjAwMyIsICIwMTIiLCAiMTAyIiwgIjAyMUQiLCAiMDIxVSIsICIwMjFDIiwgCiAgIjExMUQiLCAiMTExVSIsICIwMzBUIiwgIjAzMEMiLCAiMjAxIiwgCiAgIjEyMEQiLCAiMTIwVSIsICIxMjBDIiwgIjIxMCIsICIzMDAiCikKCiMgQ29tYmluZSBpbnRvIGEgZGF0YSBmcmFtZQp0cmlhZF90YWJsZSA8LSBkYXRhLmZyYW1lKAogIFRyaWFkID0gdHJpYWRfdHlwZXMsCiAgQ291bnQgPSBhcy5udW1lcmljKHRyaWFkcykKKQoKdHJpYWRfdGFibGUKCmBgYAoKIyMjIFdhdmUgMgoKSW4gV2F2ZSAyLCBib3RoIHRyaWFkIHR5cGVzIGFwcGVhcmVkIG1vcmUgZnJlcXVlbnRseTogMDIxQyBvY2N1cnJlZCAyODcgdGltZXMsIGFuZCAwMzBUIGFwcGVhcmVkIDU2IHRpbWVzLiBXaGlsZSB0aGlzIGluY3JlYXNlIHN1Z2dlc3RzIGFuIGV4cGFuc2lvbiBvZiB0cmlhZGljIHN0cnVjdHVyZXMsIHRoZSBncm93dGggbWF5IHBhcnRseSByZWZsZWN0IHRoZSBhZGRpdGlvbiBvZiBuZXcgaW5kaXZpZHVhbHMgdG8gdGhlIG5ldHdvcmsgcmF0aGVyIHRoYW4gYSBzdWJzdGFudGl2ZSBjaGFuZ2UgaW4gdGhlIHVuZGVybHlpbmcgY29sbGFib3JhdGlvbiBwYXR0ZXJucy4KCmBgYHtyfQojIENvbXB1dGUgdHJpYWQgY2Vuc3VzIChpZ3JhcGggdmVyc2lvbikKdHJpYWRzIDwtIHRyaWFkX2NlbnN1cyhnMikKCiMgRGVmaW5lIHRyaWFkIHR5cGVzCnRyaWFkX3R5cGVzIDwtIGMoCiAgIjAwMyIsICIwMTIiLCAiMTAyIiwgIjAyMUQiLCAiMDIxVSIsICIwMjFDIiwgCiAgIjExMUQiLCAiMTExVSIsICIwMzBUIiwgIjAzMEMiLCAiMjAxIiwgCiAgIjEyMEQiLCAiMTIwVSIsICIxMjBDIiwgIjIxMCIsICIzMDAiCikKCiMgQ29tYmluZSBpbnRvIGEgZGF0YSBmcmFtZQp0cmlhZF90YWJsZSA8LSBkYXRhLmZyYW1lKAogIFRyaWFkID0gdHJpYWRfdHlwZXMsCiAgQ291bnQgPSBhcy5udW1lcmljKHRyaWFkcykKKQoKdHJpYWRfdGFibGUKYGBgCgojIyMgUmVzdWx0cwpUaGUgYW5zd2VyIHRvIHRoZSBmaXJzdCByZXNlYXJjaCBxdWVzdGlvbiBpcyB0aGF0IGJvdGggMDIxQyBhbmQgMDMwVCB0cmlhZGljIHN0cnVjdHVyZXMgYXJlIHByZXNlbnQgaW4gdGhlIG5ldHdvcmsgaW4gYm90aCB3YXZlcywgd2l0aCAwMjFDIGNvbnNpc3RlbnRseSBiZWluZyB0aGUgbW9zdCBmcmVxdWVudCBvZiB0aGUgdHdvLiBUaGUgcmlzZSBpbiB0aGVpciBvY2N1cnJlbmNlIGZyb20gV2F2ZSAxIHRvIFdhdmUgMiBwb2ludHMgdG8gYSBnZW5lcmFsIGluY3JlYXNlIGluIHRyaWFkaWMgY29ubmVjdGl2aXR5LCBsaWtlbHkgZHJpdmVuIGJ5IG5ldHdvcmsgZXhwYW5zaW9uIHJhdGhlciB0aGFuIGEgc2hpZnQgaW4gc3RydWN0dXJhbCB0ZW5kZW5jaWVzLgoKPGJyPgoKIyMgR2VuZGVyZWQgdHJpYWRzIFdhdmUgMQoKSW4gb3JkZXIgdG8gYW5zd2VyIHRoZSBzZWNvbmQgcmVzZWFyY2ggcXVlc3Rpb24sIEkgbmVlZCB0byBpZGVudGlmeSB0aGUgZ2VuZGVyIGNvbmZpZ3VyYXRpb25zIG9mIHRoZSB0cmlhZHMgMDIxQyBhbmQgMDMwVC4gSW4gb3JkZXIgdG8gdGhpcywgSSBmaXJzdCBuZWVkIHRvIGNyZWF0ZSBhIGRhdGFzZXQgaW4gd2hpY2ggdGhlIGNvbmZpZ3VyYXRpb25zIGFyZSBsaW5rZWQgdG8gYWN0dWFsIG5vZGVzLCByYXRoZXIgdGhhbiBzaW1wbHkgY291bnRpbmcgdGhlIG51bWJlciBvZiBjb25maWd1cmF0aW9ucyBhcyBhIHRyaWFkIGNlbnN1cyBkb2VzLgoKQ3JlYXRpbmcgdGhpcyBkYXRhc2V0IGlzIGNvbXB1dGF0aW9uYWxseSBpbnRlbnNpdmUgYmVjYXVzZSwgZm9yIGVhY2ggcGVyc29uLCBldmVyeSBwb3NzaWJsZSB0cmlhZCBjb21iaW5hdGlvbiBtdXN0IGJlIHJlY29yZGVkLiBTaW5jZSBpbmRpdmlkdWFscyBtdXN0IGJlIGNvbm5lY3RlZCB0byBhdCBsZWFzdCBvbmUgb3RoZXIgcGVyc29uIHRvIGJlIHBhcnQgb2YgYSBwb3NzaWJsZSB0cmlhZCwgaXNvbGF0ZXMgY2FuIGJlIHJlbW92ZWQgZnJvbSB0aGUgZGF0YXNldC4gVGhpcyByZWR1Y2VzIHRoZSBkYXRhc2V0IHRvIDIzMSBwZW9wbGUgaW4gdGhlIGZpcnN0IHdhdmUsIHdoaWNoIHNpZ25pZmljYW50bHkgc3BlZWRzIHVwIHRoZSBmb3ItZWFjaCBsb29wLgoKIyMjIERhdGFmcmFtZQoKYGBge3IsIGV2YWwgPSBGQUxTRX0Kcm93X3N1bXMgPC0gcm93U3Vtcyh3YXZlMSkKY29sX3N1bXMgPC0gY29sU3Vtcyh3YXZlMSkKIyBzdW0ocm93X3N1bXMgIT0gMCB8IGNvbF9zdW1zICE9IDApCiMgMjMxIHBlb3BsZSByZW1haW4KCnJvd19zdW1zIDwtIHJvd1N1bXMod2F2ZTEpCmNvbF9zdW1zIDwtIGNvbFN1bXMod2F2ZTEpCm5vbnplcm9fdGllcyA8LSB3aGljaChyb3dfc3VtcyAhPSAwIHwgY29sX3N1bXMgIT0gMCkKCmdlbmRlciA8LSByZXN1bHRfZ2VuZGVyMiRkZW1vZ3JhcGhpY3MkZ2VuZGVyCgp0cmlhZHMgPC0gYygiMDAzIiwgIjAxMiIsICIxMDIiLCAiMDIxRCIsICIwMjFVIiwgIjAyMUMiLCAiMTExRCIsICIxMTFVIiwgIjAzMFQiLCAiMDMwQyIsICIyMDEiLCAiMTIwRCIsICIxMjBVIiwgIjEyMEMiLCAiMjEwIiwgIjMwMCIpCgpkZiA8LSBkYXRhLmZyYW1lKCkKCmRmIDwtIGZvcmVhY2goYTEgPSBub256ZXJvX3RpZXMsIGkgPSBpdGVyYXRvcnM6Omljb3VudCgpLCAuY29tYmluZSA9ICJyYmluZCIpICU6JQogIGZvcmVhY2goYTIgPSBub256ZXJvX3RpZXMsIGogPSBpdGVyYXRvcnM6Omljb3VudCgpLCAuY29tYmluZSA9ICJyYmluZCIpICU6JQogIGZvcmVhY2goYTMgPSBub256ZXJvX3RpZXMsIGsgPSBpdGVyYXRvcnM6Omljb3VudCgpLCAuY29tYmluZSA9ICJyYmluZCIpICVkbyUgewogICAgCiAgICAjIFByaW50IHByb2dyZXNzIGZvciBlYWNoIGExIG9ubHkKICAgIGlmIChqID09IDEgJiYgayA9PSAxKSB7ICAjIG9ubHkgcHJpbnQgb25jZSBwZXIgYTEKICAgICAgcHJpbnQocGFzdGUwKCJQcm9jZXNzaW5nIG91dGVyIG5vZGUgYTE9IiwgYTEsICIgKGk9IiwgaSwgIikiKSkKICAgIH0KICAgIAogICAgaWYgKGkgPiBqICYgaiA+IGspIHsgICMgaXRlcmF0aW9uIGNvdW50cyBzdGlsbCBjb250cm9sIGxvb3Agb3JkZXIKICAgICAgZGF0YS5mcmFtZSgKICAgICAgICBpID0gYTEsIGogPSBhMiwgayA9IGEzLCAgICAgICAgICAgIyB1c2UgYTEsIGEyLCBhMyBhcyBub2RlIElEcwogICAgICAgIGdlbmRlcl9pID0gZ2VuZGVyW2ExXSwgICAgICAgICAgICAgIyBvcmlnaW5hbCBub2RlIElEcyBmb3IgaW5kZXhpbmcKICAgICAgICBnZW5kZXJfaiA9IGdlbmRlclthMl0sCiAgICAgICAgZ2VuZGVyX2sgPSBnZW5kZXJbYTNdLAogICAgICAgIHQxX2lqID0gYXMuY2hhcmFjdGVyKHdhdmUxW2ExLCBhMl0pLAogICAgICAgIHQxX2ppID0gYXMuY2hhcmFjdGVyKHdhdmUxW2EyLCBhMV0pLAogICAgICAgIHQxX2lrID0gYXMuY2hhcmFjdGVyKHdhdmUxW2ExLCBhM10pLAogICAgICAgIHQxX2tpID0gYXMuY2hhcmFjdGVyKHdhdmUxW2EzLCBhMV0pLAogICAgICAgIHQxX2prID0gYXMuY2hhcmFjdGVyKHdhdmUxW2EyLCBhM10pLAogICAgICAgIHQxX2tqID0gYXMuY2hhcmFjdGVyKHdhdmUxW2EzLCBhMl0pLAogICAgICAgIHR5cGUgPSB0cmlhZHNbd2hpY2goc25hOjp0cmlhZC5jZW5zdXMod2F2ZTFbYyhhMSwgYTIsIGEzKSwgYyhhMSwgYTIsIGEzKV0pID09IDEpXQogICAgICApCiAgICB9CiAgfQoKIyBPcHRpb25hbDogY3JlYXRlIHRyaWFkIG5hbWUKZGYkbmFtZSA8LSBwYXN0ZTAoZGYkaSwgIi4iLCBkZiRqLCAiLiIsIGRmJGspCgp3cml0ZS5jc3YoZGYsICIuL2RhdGEvcHJvY2Vzc2VkL3dhdmUxZXhjZWwuY3N2Iiwgcm93Lm5hbWVzID0gRkFMU0UpCmBgYAoKTG9hZCB0aGUgZmlsZQpgYGB7cn0Kd2F2ZTFleGNlbCA8LSByZWFkLmNzdigiLi9kYXRhL3Byb2Nlc3NlZC93YXZlMWV4Y2VsLmNzdiIpCmhlYWQod2F2ZTFleGNlbFssIDE6MTNdKQpgYGAKCgojIyMgQW5hbHlzaXMKCjAyMUMKYGBge3J9CiMgb25seSBrZWVwIHRoZSB0cmlhbmdsZXMgd2UgYXJlIGludGVyZXN0ZWQgaW4KIyBhbHNvIGZpbHRlciB0aGUgcGVvcGxlIHdpdGggZ2VuZGVyID0gTkEgb3V0ICh3YXMgb25lIHBlcnNvbikKZGZfZmlsdGVyZWQgPC0gc3Vic2V0KAogIHdhdmUxZXhjZWwsCiAgdHlwZSAlaW4lIGMoIjAyMUMiLCAiMDMwVCIpICYKICAgICFpcy5uYShnZW5kZXJfaSkgJgogICAgIWlzLm5hKGdlbmRlcl9qKSAmCiAgICAhaXMubmEoZ2VuZGVyX2spCikKCndyaXRlLmNzdihkZiwgIi4vZGF0YS9wcm9jZXNzZWQvZGZfZmlsdGVyZWQuY3N2Iiwgcm93Lm5hbWVzID0gRkFMU0UpCgojIEluaXRpYWxpemUgY291bnRlcnMgZm9yIDAyMUMKZmZtIDwtIDAKbW1mIDwtIDAKbW1tIDwtIDAKZmZmIDwtIDAKCiMgaSBhbSBzbyBzb3JyeSBmb3IgdGhpcyBmb3IgbG9vcCA6KSBJIGtub3cgaXQgaXMgaG9ycmlibGUgdG8gbG9vayBhdCBidXQgaXQgd29ya3MgYW5kIEkgdW5kZXJzdGFuZCBpdApmb3IgKGlkeCBpbiAxOm5yb3coZGZfZmlsdGVyZWQpKSB7CiAgIyBUaWUgdmFyaWFibGVzCiAgdF9paiA8LSBkZl9maWx0ZXJlZCR0MV9paltpZHhdCiAgdF9qaSA8LSBkZl9maWx0ZXJlZCR0MV9qaVtpZHhdCiAgdF9payA8LSBkZl9maWx0ZXJlZCR0MV9pa1tpZHhdCiAgdF9raSA8LSBkZl9maWx0ZXJlZCR0MV9raVtpZHhdCiAgdF9qayA8LSBkZl9maWx0ZXJlZCR0MV9qa1tpZHhdCiAgdF9raiA8LSBkZl9maWx0ZXJlZCR0MV9raltpZHhdCiAgCiAgIyBHZW5kZXIgdmFyaWFibGVzCiAgZ19pIDwtIGRmX2ZpbHRlcmVkJGdlbmRlcl9pW2lkeF0KICBnX2ogPC0gZGZfZmlsdGVyZWQkZ2VuZGVyX2pbaWR4XQogIGdfayA8LSBkZl9maWx0ZXJlZCRnZW5kZXJfa1tpZHhdCiAgCiAgIyAxKSBpIC0+IGogLT4gaywgb3BlbjogaSAtPiBrIG11c3QgYmUgMCBvciBOQQogIGlmICh0X2lqID09IDEgJiB0X2prID09IDEgJiAhKHRfaWsgPT0gMSkpIHsKICAgIGlmIChnX2kgPT0gImZlbWFsZSIgJiBnX2ogPT0gImZlbWFsZSIgJiBnX2sgPT0gIm1hbGUiKSBmZm0gPC0gZmZtICsgMQogICAgaWYgKGdfaSA9PSAibWFsZSIgJiBnX2ogPT0gIm1hbGUiICYgZ19rID09ICJmZW1hbGUiKSBtbWYgPC0gbW1mICsgMQogICAgaWYgKGdfaSA9PSAibWFsZSIgJiBnX2ogPT0gIm1hbGUiICYgZ19rID09ICJtYWxlIikgbW1tIDwtIG1tbSArIDEKICAgIGlmIChnX2kgPT0gImZlbWFsZSIgJiBnX2ogPT0gImZlbWFsZSIgJiBnX2sgPT0gImZlbWFsZSIpIGZmZiA8LSBmZmYgKyAxCiAgfQogIAogICMgMikgaSAtPiBrIC0+IGosIG9wZW46IGkgLT4gaiBtdXN0IGJlIDAgb3IgTkEKICBpZiAodF9payA9PSAxICYgdF9raiA9PSAxICYgISh0X2lqID09IDEpKSB7CiAgICBpZiAoZ19pID09ICJmZW1hbGUiICYgZ19rID09ICJmZW1hbGUiICYgZ19qID09ICJtYWxlIikgZmZtIDwtIGZmbSArIDEKICAgIGlmIChnX2kgPT0gIm1hbGUiICYgZ19rID09ICJtYWxlIiAmIGdfaiA9PSAiZmVtYWxlIikgbW1mIDwtIG1tZiArIDEKICAgIGlmIChnX2kgPT0gIm1hbGUiICYgZ19rID09ICJtYWxlIiAmIGdfaiA9PSAibWFsZSIpIG1tbSA8LSBtbW0gKyAxCiAgICBpZiAoZ19pID09ICJmZW1hbGUiICYgZ19rID09ICJmZW1hbGUiICYgZ19qID09ICJmZW1hbGUiKSBmZmYgPC0gZmZmICsgMQogIH0KICAKICAjIDMpIGogLT4gaSAtPiBrLCBvcGVuOiBqIC0+IGsgbXVzdCBiZSAwIG9yIE5BCiAgaWYgKHRfamkgPT0gMSAmIHRfaWsgPT0gMSAmICEodF9qayA9PSAxKSkgewogICAgaWYgKGdfaiA9PSAiZmVtYWxlIiAmIGdfaSA9PSAiZmVtYWxlIiAmIGdfayA9PSAibWFsZSIpIGZmbSA8LSBmZm0gKyAxCiAgICBpZiAoZ19qID09ICJtYWxlIiAmIGdfaSA9PSAibWFsZSIgJiBnX2sgPT0gImZlbWFsZSIpIG1tZiA8LSBtbWYgKyAxCiAgICBpZiAoZ19qID09ICJtYWxlIiAmIGdfaSA9PSAibWFsZSIgJiBnX2sgPT0gIm1hbGUiKSBtbW0gPC0gbW1tICsgMQogICAgaWYgKGdfaiA9PSAiZmVtYWxlIiAmIGdfaSA9PSAiZmVtYWxlIiAmIGdfayA9PSAiZmVtYWxlIikgZmZmIDwtIGZmZiArIDEKICB9CiAgCiAgIyA0KSBqIC0+IGsgLT4gaSwgb3BlbjogaiAtPiBpIG11c3QgYmUgMCBvciBOQQogIGlmICh0X2prID09IDEgJiB0X2tpID09IDEgJiAhKHRfamkgPT0gMSkpIHsKICAgIGlmIChnX2ogPT0gImZlbWFsZSIgJiBnX2sgPT0gImZlbWFsZSIgJiBnX2kgPT0gIm1hbGUiKSBmZm0gPC0gZmZtICsgMQogICAgaWYgKGdfaiA9PSAibWFsZSIgJiBnX2sgPT0gIm1hbGUiICYgZ19pID09ICJmZW1hbGUiKSBtbWYgPC0gbW1mICsgMQogICAgaWYgKGdfaiA9PSAibWFsZSIgJiBnX2sgPT0gIm1hbGUiICYgZ19pID09ICJtYWxlIikgbW1tIDwtIG1tbSArIDEKICAgIGlmIChnX2ogPT0gImZlbWFsZSIgJiBnX2sgPT0gImZlbWFsZSIgJiBnX2kgPT0gImZlbWFsZSIpIGZmZiA8LSBmZmYgKyAxCiAgfQogIAogICMgNSkgayAtPiBpIC0+IGosIG9wZW46IGsgLT4gaiBtdXN0IGJlIDAgb3IgTkEKICBpZiAodF9raSA9PSAxICYgdF9paiA9PSAxICYgISh0X2tqID09IDEpKSB7CiAgICBpZiAoZ19rID09ICJmZW1hbGUiICYgZ19pID09ICJmZW1hbGUiICYgZ19qID09ICJtYWxlIikgZmZtIDwtIGZmbSArIDEKICAgIGlmIChnX2sgPT0gIm1hbGUiICYgZ19pID09ICJtYWxlIiAmIGdfaiA9PSAiZmVtYWxlIikgbW1mIDwtIG1tZiArIDEKICAgIGlmIChnX2sgPT0gIm1hbGUiICYgZ19pID09ICJtYWxlIiAmIGdfaiA9PSAibWFsZSIpIG1tbSA8LSBtbW0gKyAxCiAgICBpZiAoZ19rID09ICJmZW1hbGUiICYgZ19pID09ICJmZW1hbGUiICYgZ19qID09ICJmZW1hbGUiKSBmZmYgPC0gZmZmICsgMQogIH0KICAKICAjIDYpIGsgLT4gaiAtPiBpLCBvcGVuOiBrIC0+IGkgbXVzdCBiZSAwIG9yIE5BCiAgaWYgKHRfa2ogPT0gMSAmIHRfamkgPT0gMSAmICEodF9raSA9PSAxKSkgewogICAgaWYgKGdfayA9PSAiZmVtYWxlIiAmIGdfaiA9PSAiZmVtYWxlIiAmIGdfaSA9PSAibWFsZSIpIGZmbSA8LSBmZm0gKyAxCiAgICBpZiAoZ19rID09ICJtYWxlIiAmIGdfaiA9PSAibWFsZSIgJiBnX2kgPT0gImZlbWFsZSIpIG1tZiA8LSBtbWYgKyAxCiAgICBpZiAoZ19rID09ICJtYWxlIiAmIGdfaiA9PSAibWFsZSIgJiBnX2kgPT0gIm1hbGUiKSBtbW0gPC0gbW1tICsgMQogICAgaWYgKGdfayA9PSAiZmVtYWxlIiAmIGdfaiA9PSAiZmVtYWxlIiAmIGdfaSA9PSAiZmVtYWxlIikgZmZmIDwtIGZmZiArIDEKICB9Cn0KCiMgUHJpbnQgcmVzdWx0cwpmZm0KbW1mCm1tbQpmZmYKYGBgCjAzMFQKYGBge3J9CiMgSW5pdGlhbGl6ZSBjb3VudGVycyBmb3IgMDMwVApmZm1jbG9zZWQgPC0gMAptbWZjbG9zZWQgPC0gMAptbW1jbG9zZWQgPC0gMApmZmZjbG9zZWQgPC0gMAoKZm9yIChpZHggaW4gMTpucm93KGRmX2ZpbHRlcmVkKSkgewogICMgQXNzaWduIHRpZSB2YXJpYWJsZXMgZm9yIHJlYWRhYmlsaXR5CiAgdF9paiA8LSBkZl9maWx0ZXJlZCR0MV9paltpZHhdCiAgdF9qaSA8LSBkZl9maWx0ZXJlZCR0MV9qaVtpZHhdCiAgdF9payA8LSBkZl9maWx0ZXJlZCR0MV9pa1tpZHhdCiAgdF9raSA8LSBkZl9maWx0ZXJlZCR0MV9raVtpZHhdCiAgdF9qayA8LSBkZl9maWx0ZXJlZCR0MV9qa1tpZHhdCiAgdF9raiA8LSBkZl9maWx0ZXJlZCR0MV9raltpZHhdCiAgCiAgIyBBc3NpZ24gZ2VuZGVyIHZhcmlhYmxlcyBmb3IgcmVhZGFiaWxpdHkKICBnX2kgPC0gZGZfZmlsdGVyZWQkZ2VuZGVyX2lbaWR4XQogIGdfaiA8LSBkZl9maWx0ZXJlZCRnZW5kZXJfaltpZHhdCiAgZ19rIDwtIGRmX2ZpbHRlcmVkJGdlbmRlcl9rW2lkeF0KICAKICAjIDEpIGkgLT4gaiAtPiBrLCBjbG9zZWQ6IGkgLT4gayBleGlzdHMKICBpZiAodF9paiA9PSAxICYgdF9qayA9PSAxICYgdF9payA9PSAxKSB7CiAgICBpZiAoZ19pID09ICJmZW1hbGUiICYgZ19qID09ICJmZW1hbGUiICYgZ19rID09ICJtYWxlIikgZmZtY2xvc2VkIDwtIGZmbWNsb3NlZCArIDEKICAgIGlmIChnX2kgPT0gIm1hbGUiICYgZ19qID09ICJtYWxlIiAmIGdfayA9PSAiZmVtYWxlIikgbW1mY2xvc2VkIDwtIG1tZmNsb3NlZCArIDEKICAgIGlmIChnX2kgPT0gIm1hbGUiICYgZ19qID09ICJtYWxlIiAmIGdfayA9PSAibWFsZSIpIG1tbWNsb3NlZCA8LSBtbW1jbG9zZWQgKyAxCiAgICBpZiAoZ19pID09ICJmZW1hbGUiICYgZ19qID09ICJmZW1hbGUiICYgZ19rID09ICJmZW1hbGUiKSBmZmZjbG9zZWQgPC0gZmZmY2xvc2VkICsgMQogIH0KICAKICAjIDIpIGkgLT4gayAtPiBqLCBjbG9zZWQ6IGkgLT4gaiBleGlzdHMKICBpZiAodF9payA9PSAxICYgdF9raiA9PSAxICYgdF9paiA9PSAxKSB7CiAgICBpZiAoZ19pID09ICJmZW1hbGUiICYgZ19rID09ICJmZW1hbGUiICYgZ19qID09ICJtYWxlIikgZmZtY2xvc2VkIDwtIGZmbWNsb3NlZCArIDEKICAgIGlmIChnX2kgPT0gIm1hbGUiICYgZ19rID09ICJtYWxlIiAmIGdfaiA9PSAiZmVtYWxlIikgbW1mY2xvc2VkIDwtIG1tZmNsb3NlZCArIDEKICAgIGlmIChnX2kgPT0gIm1hbGUiICYgZ19rID09ICJtYWxlIiAmIGdfaiA9PSAibWFsZSIpIG1tbWNsb3NlZCA8LSBtbW1jbG9zZWQgKyAxCiAgICBpZiAoZ19pID09ICJmZW1hbGUiICYgZ19rID09ICJmZW1hbGUiICYgZ19qID09ICJmZW1hbGUiKSBmZmZjbG9zZWQgPC0gZmZmY2xvc2VkICsgMQogIH0KICAKICAjIDMpIGogLT4gaSAtPiBrLCBjbG9zZWQ6IGogLT4gayBleGlzdHMKICBpZiAodF9qaSA9PSAxICYgdF9payA9PSAxICYgdF9qayA9PSAxKSB7CiAgICBpZiAoZ19qID09ICJmZW1hbGUiICYgZ19pID09ICJmZW1hbGUiICYgZ19rID09ICJtYWxlIikgZmZtY2xvc2VkIDwtIGZmbWNsb3NlZCArIDEKICAgIGlmIChnX2ogPT0gIm1hbGUiICYgZ19pID09ICJtYWxlIiAmIGdfayA9PSAiZmVtYWxlIikgbW1mY2xvc2VkIDwtIG1tZmNsb3NlZCArIDEKICAgIGlmIChnX2ogPT0gIm1hbGUiICYgZ19pID09ICJtYWxlIiAmIGdfayA9PSAibWFsZSIpIG1tbWNsb3NlZCA8LSBtbW1jbG9zZWQgKyAxCiAgICBpZiAoZ19qID09ICJmZW1hbGUiICYgZ19pID09ICJmZW1hbGUiICYgZ19rID09ICJmZW1hbGUiKSBmZmZjbG9zZWQgPC0gZmZmY2xvc2VkICsgMQogIH0KICAKICAjIDQpIGogLT4gayAtPiBpLCBjbG9zZWQ6IGogLT4gaSBleGlzdHMKICBpZiAodF9qayA9PSAxICYgdF9raSA9PSAxICYgdF9qaSA9PSAxKSB7CiAgICBpZiAoZ19qID09ICJmZW1hbGUiICYgZ19rID09ICJmZW1hbGUiICYgZ19pID09ICJtYWxlIikgZmZtY2xvc2VkIDwtIGZmbWNsb3NlZCArIDEKICAgIGlmIChnX2ogPT0gIm1hbGUiICYgZ19rID09ICJtYWxlIiAmIGdfaSA9PSAiZmVtYWxlIikgbW1mY2xvc2VkIDwtIG1tZmNsb3NlZCArIDEKICAgIGlmIChnX2ogPT0gIm1hbGUiICYgZ19rID09ICJtYWxlIiAmIGdfaSA9PSAibWFsZSIpIG1tbWNsb3NlZCA8LSBtbW1jbG9zZWQgKyAxCiAgICBpZiAoZ19qID09ICJmZW1hbGUiICYgZ19rID09ICJmZW1hbGUiICYgZ19pID09ICJmZW1hbGUiKSBmZmZjbG9zZWQgPC0gZmZmY2xvc2VkICsgMQogIH0KICAKICAjIDUpIGsgLT4gaSAtPiBqLCBjbG9zZWQ6IGsgLT4gaiBleGlzdHMKICBpZiAodF9raSA9PSAxICYgdF9paiA9PSAxICYgdF9raiA9PSAxKSB7CiAgICBpZiAoZ19rID09ICJmZW1hbGUiICYgZ19pID09ICJmZW1hbGUiICYgZ19qID09ICJtYWxlIikgZmZtY2xvc2VkIDwtIGZmbWNsb3NlZCArIDEKICAgIGlmIChnX2sgPT0gIm1hbGUiICYgZ19pID09ICJtYWxlIiAmIGdfaiA9PSAiZmVtYWxlIikgbW1mY2xvc2VkIDwtIG1tZmNsb3NlZCArIDEKICAgIGlmIChnX2sgPT0gIm1hbGUiICYgZ19pID09ICJtYWxlIiAmIGdfaiA9PSAibWFsZSIpIG1tbWNsb3NlZCA8LSBtbW1jbG9zZWQgKyAxCiAgICBpZiAoZ19rID09ICJmZW1hbGUiICYgZ19pID09ICJmZW1hbGUiICYgZ19qID09ICJmZW1hbGUiKSBmZmZjbG9zZWQgPC0gZmZmY2xvc2VkICsgMQogIH0KICAKICAjIDYpIGsgLT4gaiAtPiBpLCBjbG9zZWQ6IGsgLT4gaSBleGlzdHMKICBpZiAodF9raiA9PSAxICYgdF9qaSA9PSAxICYgdF9raSA9PSAxKSB7CiAgICBpZiAoZ19rID09ICJmZW1hbGUiICYgZ19qID09ICJmZW1hbGUiICYgZ19pID09ICJtYWxlIikgZmZtY2xvc2VkIDwtIGZmbWNsb3NlZCArIDEKICAgIGlmIChnX2sgPT0gIm1hbGUiICYgZ19qID09ICJtYWxlIiAmIGdfaSA9PSAiZmVtYWxlIikgbW1mY2xvc2VkIDwtIG1tZmNsb3NlZCArIDEKICAgIGlmIChnX2sgPT0gIm1hbGUiICYgZ19qID09ICJtYWxlIiAmIGdfaSA9PSAibWFsZSIpIG1tbWNsb3NlZCA8LSBtbW1jbG9zZWQgKyAxCiAgICBpZiAoZ19rID09ICJmZW1hbGUiICYgZ19qID09ICJmZW1hbGUiICYgZ19pID09ICJmZW1hbGUiKSBmZmZjbG9zZWQgPC0gZmZmY2xvc2VkICsgMQogIH0KfQoKIyBQcmludCByZXN1bHRzCmZmbWNsb3NlZAptbWZjbG9zZWQKbW1tY2xvc2VkCmZmZmNsb3NlZApgYGAKIyMjIFJlc3VsdHMKCkJhc2VkIG9uIHRoZSBhbmFseXNlcyBhYm92ZSwgdGhlIHNlY29uZCByZXNlYXJjaCBxdWVzdGlvbiBjYW4gYmUgYWRkcmVzc2VkLiBUaGlzIHJlc2VhcmNoIHF1ZXN0aW9uIHdhcyBkZXNjcmlwdGl2ZSwgZm9jdXNpbmcgb24gaG93IGdlbmRlciBpcyBkaXN0cmlidXRlZCBhY3Jvc3MgdGhlIHRyaWFkaWMgc3RydWN0dXJlcyAwMjFDIGFuZCAwMzFUIG9ic2VydmVkIGluIHRoZSBuZXR3b3JrLgoKIVtdKGltYWdlcy9kaXNfcHJvcF9nZW5kZXIzLnBuZykKCkFsdGhvdWdoIHRoZSBvdmVyYWxsIG5ldHdvcmsgaXMgYXBwcm94aW1hdGVseSBnZW5kZXIgYmFsYW5jZWQgKDQ3LjAlIGZlbWFsZSBhbmQgNDkuNyUgbWFsZSksIHRoZSBjb21wb3NpdGlvbiBvZiB0aGUgMDIxQyBhbmQgMDMxVCB0cmlhZGljIHR5cGVzIGluIFdhdmUgMSByZXZlYWxzIGEgY2xlYXIgb3Zlci1yZXByZXNlbnRhdGlvbiBvZiBhbGwtbWFsZSBncm91cHMuIEluIDAyMUMgdHJpYWRzLCBuZWFybHkgNDAlIGFyZSBjb21wb3NlZCBlbnRpcmVseSBvZiBtZW4sIGNvbXBhcmVkIHRvIG9ubHkgNyUgYWxsLWZlbWFsZSB0cmlhZHMuIEEgc2ltaWxhciBwYXR0ZXJuIGFwcGVhcnMgaW4gMDMxVCB0cmlhZHMsIHdoZXJlIDM5JSBhcmUgYWxsLW1hbGUgYW5kIDIyJSBhbGwtZmVtYWxlLiBUcmlhZHMgaW4gd2hpY2ggQSBhbmQgQiBhcmUgdGhlIHNhbWUgZ2VuZGVyIGJ1dCBDIGRpZmZlcnMgKGZlbWFsZS1mZW1hbGUtbWFsZSBvciBtYWxlLW1hbGUtZmVtYWxlKSBhcmUgY29uc2lkZXJhYmx5IGxlc3MgZnJlcXVlbnQsIHBhcnRpY3VsYXJseSB0aG9zZSB3aXRoIGEgZmVtYWxlIG1ham9yaXR5IChmZW1hbGUtZmVtYWxlLW1hbGUpLgoKRm9yIDAzMVQgdHJpYWRzIHNwZWNpZmljYWxseSwgc2FtZSBnZW5kZXIgdHJpYWRzIGFyZSBlc3BlY2lhbGx5IHByb25vdW5jZWQuIEFwcHJveGltYXRlbHkgNjElIG9mIHRoZXNlIHRyaWFkcyBjb25zaXN0IGVudGlyZWx5IG9mIG9uZSBnZW5kZXIgKGVpdGhlciBhbGwtbWFsZSBvciBhbGwtZmVtYWxlKSwgd2hpbGUgb25seSBhcm91bmQgOCUgYXJlIG9mIHRoZSBmZW1hbGUtZmVtYWxlLW1hbGUgb3IgbWFsZS1tYWxlLWZlbWFsZSB0eXBlLiBHaXZlbiB0aGUgb3ZlcmFsbCBnZW5kZXIgYmFsYW5jZSBvZiB0aGUgbmV0d29yaywgdGhpcyBpbmRpY2F0ZXMgdGhhdCB0cmFuc2l0aXZlIG9yIHRpZ2h0bHkgaW50ZXJjb25uZWN0ZWQgdHJpYWRzIHRlbmQgdG8gZm9ybSB3aXRoaW4gc2FtZS1nZW5kZXIgZ3JvdXBzIHJhdGhlciB0aGFuIGFjcm9zcyB0aGVtLCBwYXJ0aWN1bGFybHkgaW4gYWxsLW1hbGUgdHJpYWRzLgoKVGFrZW4gdG9nZXRoZXIsIHRoZSByZXN1bHRzIGFkZHJlc3NpbmcgdGhlIHNlY29uZCByZXNlYXJjaCBxdWVzdGlvbiByZXZlYWwgZ2VuZGVyZWQgc3RydWN0dXJpbmcgd2l0aGluIHRoZSAwMjFDIGFuZCAwMzFUIHRyaWFkcywgc3VnZ2VzdGluZyB0aGF0IHRoZXNlIG5ldHdvcmsgY29uZmlndXJhdGlvbnMgYXJlIHNoYXBlZCBieSBnZW5kZXItYmFzZWQgdGVuZGVuY2llcyBpbiB0aWUgZm9ybWF0aW9uLgoKPGJyPgoKIyMjIEdyYXBoIDAyMUMgMDMwVCBUcmlhZHMKCk5vdywgdG8gdmlzdWFsaXplIHRoZSBuZXR3b3JrIG9mIDAyMUMgdHJpYWRzIGFuZCAwMzBUIHRyaWFkcyBJIHR1cm4gdGhlIGRhdGFzZXQgImRmX2ZpbHRlcmVkIiBmcm9tIFdhdmUgMSBiYWNrIGludG8gYW4gYWRqYWNlbnkgbWF0cml4IGFuZCBjcmVhdGUgYSBnZW5kZXIgbGlzdCBmb3IgdGhvc2UgcGVvcGxlLiAKCmBgYHtyfQojIEFzc3VtaW5nIHlvdXIgZGF0YWZyYW1lIGlzIGNhbGxlZCBkZl9maWx0ZXJlZApkZjMgPC0gZGZfZmlsdGVyZWQKCiMgSWRlbnRpZnkgYWxsIHVuaXF1ZSBub2RlIElEcyBmcm9tIGksIGosIGsKbm9kZXMgPC0gc29ydCh1bmlxdWUoYyhkZjMkaSwgZGYzJGosIGRmMyRrKSkpCgojIENyZWF0ZSBlbXB0eSBhZGphY2VuY3kgbWF0cml4CmFkal9tYXQgPC0gbWF0cml4KDAsIG5yb3cgPSBsZW5ndGgobm9kZXMpLCBuY29sID0gbGVuZ3RoKG5vZGVzKSkKcm93bmFtZXMoYWRqX21hdCkgPC0gbm9kZXMKY29sbmFtZXMoYWRqX21hdCkgPC0gbm9kZXMKCiMgRmlsbCBhZGphY2VuY3kgbWF0cml4CmZvciAocm93IGluIDE6bnJvdyhkZjMpKSB7CiAgaSA8LSBkZjMkaVtyb3ddCiAgaiA8LSBkZjMkaltyb3ddCiAgayA8LSBkZjMka1tyb3ddCiAgCiAgIyBNYWtlIHN1cmUgdG8gb25seSBhc3NpZ24gaWYgdGhlIGNvbHVtbiBleGlzdHMgaW4gdGhlIG1hdHJpeAogIGlmIChkZjMkdDFfaWpbcm93XSA9PSAxKSBhZGpfbWF0W2FzLmNoYXJhY3RlcihpKSwgYXMuY2hhcmFjdGVyKGopXSA8LSAxCiAgaWYgKGRmMyR0MV9qaVtyb3ddID09IDEpIGFkal9tYXRbYXMuY2hhcmFjdGVyKGopLCBhcy5jaGFyYWN0ZXIoaSldIDwtIDEKICBpZiAoZGYzJHQxX2lrW3Jvd10gPT0gMSkgYWRqX21hdFthcy5jaGFyYWN0ZXIoaSksIGFzLmNoYXJhY3RlcihrKV0gPC0gMQogIGlmIChkZjMkdDFfa2lbcm93XSA9PSAxKSBhZGpfbWF0W2FzLmNoYXJhY3RlcihrKSwgYXMuY2hhcmFjdGVyKGkpXSA8LSAxCiAgaWYgKGRmMyR0MV9qa1tyb3ddID09IDEpIGFkal9tYXRbYXMuY2hhcmFjdGVyKGopLCBhcy5jaGFyYWN0ZXIoayldIDwtIDEKICBpZiAoZGYzJHQxX2tqW3Jvd10gPT0gMSkgYWRqX21hdFthcy5jaGFyYWN0ZXIoayksIGFzLmNoYXJhY3RlcihqKV0gPC0gMQp9CgojIFZpZXcgYWRqYWNlbmN5IG1hdHJpeAojIFZpZXcoYWRqX21hdCkKCiNjaGVjawojcm93X3N1bXMgPC0gcm93U3VtcyhhZGpfbWF0KQojY29sX3N1bXMgPC0gY29sU3VtcyhhZGpfbWF0KQojc3VtKHJvd19zdW1zID09IDAgJiBjb2xfc3VtcyA9PSAwKQoKIyBDcmVhdGUgZ2VuZGVyIHZlY3RvciBtYXRjaGluZyB0aGUgb3JkZXIgb2Ygbm9kZXMgaW4gYWRqX21hdApnZW5kZXJfdmVjIDwtIHNhcHBseShyb3duYW1lcyhhZGpfbWF0KSwgZnVuY3Rpb24obm9kZSkgewogIG5vZGUgPC0gYXMuY2hhcmFjdGVyKG5vZGUpCiAgCiAgIyBDaGVjayB3aGljaCBjb2x1bW4gY29udGFpbnMgdGhpcyBub2RlCiAgaWYgKG5vZGUgJWluJSBkZjMkaSkgewogICAgZGYzJGdlbmRlcl9pW3doaWNoKGRmMyRpID09IG5vZGUpWzFdXSAgIyBmaXJzdCBvY2N1cnJlbmNlCiAgfSBlbHNlIGlmIChub2RlICVpbiUgZGYzJGopIHsKICAgIGRmMyRnZW5kZXJfalt3aGljaChkZjMkaiA9PSBub2RlKVsxXV0KICB9IGVsc2UgaWYgKG5vZGUgJWluJSBkZjMkaykgewogICAgZGYzJGdlbmRlcl9rW3doaWNoKGRmMyRrID09IG5vZGUpWzFdXQogIH0gZWxzZSB7CiAgICBOQSAgIyBmYWxsYmFjawogIH0KfSkKCiMgQ2hlY2sgdGhlIHJlc3VsdAojIFZpZXcoZ2VuZGVyX3ZlYykKCmBgYAoKRmlndXJlIDEgYmVsb3cgdmlzdWFsaXplcyB0aGUgZ2VuZGVyIGRpc3RyaWJ1dGlvbiBpbiB0aGUgbmV0d29yayBvZiBpbmRpdmlkdWFscyBpbnZvbHZlZCBpbiAwMjFDIGFuZCAwMzBUIHRyaWFkcy4gTWVuIGFwcGVhciBtb3JlIGZyZXF1ZW50bHkgaW4gdGhlIG5ldHdvcmsgYW5kIGFyZSBzcHJlYWQgd2lkZWx5IGFjcm9zcyB2YXJpb3VzIGNsdXN0ZXJzLiBTZXZlcmFsIG1hbGUtZG9taW5hdGVkIGNsdXN0ZXJzIGFyZSB2aXNpYmxlLCBzdWdnZXN0aW5nIGEgc3Ryb25nZXIgbWFsZSBwcmVzZW5jZSBpbiB0aGUgZm9ybWF0aW9uIG9mIHRoZXNlIHRyaWFkcy4gV2hpbGUgd29tZW4gYXJlIGxlc3MgbnVtZXJvdXMsIHRoZXkgYWxzbyBmb3JtIG5vdGljZWFibGUgY2x1c3RlcnMsIG9mdGVuIG9uIHRoZSBuZXR3b3Jr4oCZcyBwZXJpcGhlcnkuIE92ZXJhbGwsIHRoZSBzdHJ1Y3R1cmUgc3VnZ2VzdHMgZ2VuZGVyZWQgcGF0dGVybnMgb2YgY29ubmVjdGlvbiwgd2l0aCBtZW4gb2NjdXB5aW5nIG1vcmUgY2VudHJhbCBhbmQgaW50ZXJjb25uZWN0ZWQgcG9zaXRpb25zLCBhbmQgd29tZW4gYXBwZWFyaW5nIG1vcmUgb2Z0ZW4gaW4gc21hbGxlciwgbW9yZSBsb2NhbGl6ZWQgZ3JvdXBzLgoKYGBge3J9CgojIENyZWF0ZSBpZ3JhcGggb2JqZWN0IGZyb20gYWRqYWNlbmN5IG1hdHJpeApnIDwtIGdyYXBoX2Zyb21fYWRqYWNlbmN5X21hdHJpeChhZGpfbWF0LCBtb2RlID0gImRpcmVjdGVkIiwgZGlhZyA9IEZBTFNFKQoKIyBNYXAgZ2VuZGVyIHRvIGNvbG9ycwojIEFkanVzdCB0aGUgdmFsdWVzIGluIGdlbmRlcl92ZWMgaWYgdGhleSBhcmUgbm90IGV4YWN0bHkgIm1hbGUiLyJmZW1hbGUiCm5vZGVfY29sb3JzIDwtIGlmZWxzZShnZW5kZXJfdmVjID09ICJmZW1hbGUiLCAiZGFya29yYW5nZSIsICJsaWdodGJsdWUiKQoKIyBQbG90IHRoZSBncmFwaApwbG90KGcsCiAgICAgdmVydGV4LmNvbG9yID0gbm9kZV9jb2xvcnMsICAgIyBnZW5kZXIgY29sb3JzCiAgICAgdmVydGV4LmxhYmVsID0gTkEsICAgICAgICAgICAgIyByZW1vdmUgbGFiZWxzCiAgICAgdmVydGV4LnNpemUgPSA1LCAgICAgICAgICAgICAgIyBzbWFsbCBub2RlcwogICAgIGVkZ2UuYXJyb3cuc2l6ZSA9IDAuMiwgICAgICAgICMgc21hbGxlciBhcnJvd2hlYWRzCiAgICAgbGF5b3V0ID0gbGF5b3V0X3dpdGhfZnIoZyksICAgIyBwYXNzIHRoZSBncmFwaAogICAgIG1haW4gPSAiRmlndXJlIDEuIEdlbmRlciBkaXN0cmlidXRpb24gaW4gMDIxQyBhbmQgMDMwVCB0cmlhZHMgaW4gd2F2ZSAxIikKCiMgQWRkIGxlZ2VuZApsZWdlbmQoInRvcGxlZnQiLCAgICAgICAgICAgICAgICAgICAgICMgcG9zaXRpb24gb2YgbGVnZW5kCiAgICAgICBsZWdlbmQgPSBjKCJGZW1hbGUiLCAiTWFsZSIpLCAgIyBsYWJlbHMKICAgICAgIGNvbCA9IGMoImRhcmtvcmFuZ2UiLCAibGlnaHRibHVlIiksIyBjb2xvcnMKICAgICAgIHBjaCA9IDE5LCAgICAgICAgICAgICAgICAgICAgICAjIHNvbGlkIGNpcmNsZQogICAgICAgcHQuY2V4ID0gMS41LCAgICAgICAgICAgICAgICAgICMgc2l6ZSBvZiB0aGUgY2lyY2xlcyBpbiBsZWdlbmQKICAgICAgIGJ0eSA9ICJuIikgICAgICAgICAgICAgICAgICAgICAjIG5vIGJveCBhcm91bmQgbGVnZW5kCmBgYAoKPGJyPgoKIyMgR2VuZGVyZWQgdHJpYWRzIHdhdmUgMgoKVGhlIGNvZGUgSSBkZXZlbG9wZWQgdG8gYW5hbHl6ZSBnZW5kZXIgZGlzdHJpYnV0aW9uIHdpdGhpbiB0aGUgMDIxQyBhbmQgMDMwVCB0cmlhZHMgY2FuIGFsc28gYmUgYXBwbGllZCB0byB3YXZlIDIgYnkgc2ltcGx5IHJlcGxhY2luZyBldmVyeSBpbnN0YW5jZSBvZiDigJx3YXZlMeKAnSB3aXRoIOKAnHdhdmUyLuKAnSBIb3dldmVyLCBiZWNhdXNlIHdhdmUgMiBjb250YWlucyBmZXdlciBpc29sYXRlcywgdGhlIGZvci1lYWNoIGxvb3Agd291bGQgbmVlZCB0byBpdGVyYXRlIG92ZXIgYSBtdWNoIGxhcmdlciBudW1iZXIgb2YgaW5kaXZpZHVhbHMuIEJhc2VkIG9uIG15IGNhbGN1bGF0aW9ucywgdGhpcyBwcm9jZXNzIHdvdWxkIHRha2UgYXBwcm94aW1hdGVseSB0aHJlZSBkYXlzIHRvIGNvbXBsZXRlLiBBcyBJIGRpZCBub3QgaGF2ZSB0aHJlZSBjb25zZWN1dGl2ZSBkYXlzIGR1cmluZyB3aGljaCBJIGRpZCBub3QgbmVlZCB0byB1c2UgUiwgcnVubmluZyB0aGUgZnVsbCBhbmFseXNpcyBmb3IgV2F2ZSAyIHdhcyBub3QgZmVhc2libGUgYXQgdGhpcyB0aW1lLiBJIGhvcGUgbXkgZGVtb25zdHJhdGlvbiBvZiBob3cgSSBhcHByb2FjaGVkIHRoaXMgZm9yIFdhdmUgMSBzdWZmaWNlcyBmb3Igbm93Lgo=</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("Descriptives.Rmd");
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
